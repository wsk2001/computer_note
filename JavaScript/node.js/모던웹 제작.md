# 모던웹 제작

출처:  https://fkkmemi.github.io/nemv/nemv-000-youtube/

## <span style="color:blue">1. **모던웹(NEMV) 제작 기초편**</span>

### <span style="color:green">00 영상화 소개</span>

NEMV(Node.js, Express.js, MongoDB, Vue.js)를 이용해 웹사이트를 한번에 제작하는 강좌를 만들어왔었는데요..

글, 코드, 스크린샷으로 표현하는 방법 보다 영상으로 실제 구동 되는 모습을 확인하며 강좌를 진행하는 것이 훨씬 효과적일 것 같다는 생각을 했습니다.

그래서~ 유튜브에 제가 실제 개발하는 모습을 여과 없이 올려보기로 했습니다. 글로 작성된 부분은 제가 작성한 지난 강좌를 참고하면 됩니다.  전문 유튜버도 아니고 화려한 편집 까지 하기에는 너무 시간이 오래 걸리므로 iMovie를 이용해 간단한 자막 정도만 추가해서 업로드합니다.

> 사실 편집을 하지 않는 더 큰 이유는… 본인의 목소리를 듣는 것이 상당히 역겨워서 편집은 때려쳤습니다..
> 자막도 넣다가 귀찮아서 중도 포기했습니다…
> 파이널컷을 구매하려봤더니 40만원이라 포기했습니다.

계획도 없고 편집 따위 없으므로 진행하다 고민하는 모습과 멍청한 표현력에 당황하지 마시기 바랍니다. 처음엔 어색했는데 하다보니 글 작성하는 것 보다 빠르고 직관적이어서 좋습니다. 물론 글도 같이 작성하겠지만요.. 개발자가 디버그등으로 문제를 해결하는 방법과 정 안되면 어려운 문제를 패스? 하는 방법 또한 여과 없이 올립니다. 작업하는 화면 자체가 올라가기 때문에 상단에 시간을 보시면 **노편집**이라는 것을 알 수 있을 것입니다~

# 강좌 진행 방법

기존에는 1,2시간의 장황한 설명이 붙은 페이지를 만들었다면 이번엔 챕터를 잘게 쪼개 보려고 합니다. 긴 글보다 짧은 챕터 중 원하는 것만 찾아볼 수도 것이 더 나아 보이기 때문입니다.(*router만 찾아보거나, pm2만 찾아보거나*) 대부분 영상을 5분 안에 끝내도록 노력해보려 합니다.  물론 헤메이고 버벅이면 30분이 될 수도 있습니다…

# 개발툴

크로스플랫폼의 장점을 살려서 윈도우 리눅스에서도 잘 된다는 것을 보여주려 해봤다가.. 욕심인것을 깨달았습니다.. 맥에서 하는 모습만 촬영합니다.  물론 윈도우에서도 당연히 잘 되는 플랫폼입니다.  시간이 남고 남고 남으면 윈도우, 리눅스도 한번 트라이 해보겠습니다.

# 영상 제작

퀵타임 화면기록을 이용하고 마이크는 맥북 내장 마이크를 이용합니다. 소리가 상당히 안좋습니다. 양해바랍니다~

# 영상 수익

수익이 있을 리도 없으니 광고니 뭐니 관심도 없고 알아보지도 않았습니다. 정말 무식하게 쉽게 개발하는 영상을 보여주는 것에 초점을 맞췄습니다. 그러므로 구독 요청 같은 추한 행위는 있을 리가 없습니다.

# 강좌 이유

단순 재미 입니다.  재미 있으니 공유하고 싶은 것이죠. 트렌디한 개발플랫폼 홍수 속에서 엉성한 개발자의 고민하면서도 즐기는 모습을 보여드리고 싶습니다. 생각나는 대로 진행하기 때문에 매끄러운 진행일리는 없지만, 그게 매력입니다~

# 강좌 게시 시간

매주 일요일 저녁에 업로드 예정입니다.

> 떠들면서 해야 되는 것이라 업무중에는 무리네요..

# 강좌 목록

## 기초편 재생목록 링크

[모던웹(NEMV) 강좌](https://www.youtube.com/playlist?list=PLjpTKic1SLZu43cFS3YQIKoD2vObq-DVx)

## 기본편 재생목록 링크

작업 예정

# 마치며

우선 육성이 공개되어 매우 창피합니다.. 어려운 용어 쓰지 않고 한글로 나름 최대한 쉽게 설명하려고 했는데.. 다시 보니 급하게 지나가서 이해가 어려울 만한 것들도 많아보입니다.. 사실 기존 강좌 진행하며 부수입이 있었습니다. 그 부수입이란.. 구인에 성공했습니다~ 구직하려는 사람이 제 강좌를 진행하고 검증 후 들어왔기 때문에 바로 실무가 가능할 정도로 유망한 젊은 인재를 얻었습니다.  덕분에 시간이 나서 이런 짓? 도 할 여유가 생겼습니다.. 나름 사회 기여도 했고 저도 일이 편해져서 시너지 효과 제대로 보는 것 같습니다. 제가 쓰는 플랫폼이 너무 훌륭해서 노드나 뷰를 쓰는 것은 결코 아닙니다. 파이썬이던 루비던 리액트던 핫하고 쓸만하다고 생각되면 언제라도 바꿀 생각입니다.(*리액트는 벤치마크 되었고, 이미 준비중입니다. 새로운 것을 하는 것은 늘 즐거우니까요~*)

쓰려고 하는 목적과 원리만 알면 다 그게 그것이니 한번 도전해볼 생각이 늘 있습니다. 해보지도 않고 어떤 플랫폼이 좋다 나쁘다를 얘기하면 안되겠죠?  하다가 좀 아니다 싶거나 지치면 그만두면 되니까요.. 일단 시작해보면 네이티브 플랫폼과 새로운 플랫폼의 장단점을 파악하고 용도에 맞는 프로젝트 진행이 가능합니다.

C/C++을 오래 해왔고 여전히 하고 있습니다.  기존 플랫폼으로도 쓰던 라이브러리 재사용으로 비교적 간단히 무언가 만들 수 있지만..  간단한 테스트 프로그램은 파이썬이나 노드가 훨씬 만들기가 편합니다~ 여유가 된다면 미친척하고 한번 시작해보시기 바랍니다~~



### <span style="color:green">01 에디터 설치</span>

너무 쉬운 에디터(Atom) 설치이지만, 처음 부터 하는 느낌으로 만들어봤습니다.

> 안타까운 이야기지만 에디터 설치가 안되는 정도라면 개발은 포기하는 것이 좋습니다.

# 에디터 설치

이미 설치했거나 다른 에디터 사용중이면 다면 다음 강좌로 진행하면 됩니다.

# 영상

개발을 처음 하시는 분들을 위해 영상을 만들어봤습니다.  저도 아톰은 처음 써보는데 친해지길 바랍니다.



### <span style="color:green">02 노드 설치</span>

# 노드 설치

노드 설치는 [https://nodejs.org](https://nodejs.org/) 가서 다운 받고 설치하면 끝이지만 과정이니 남겨봅니다.

# 노드 실행

커맨드 창에서 node 치고 즉시 실행할 수 있습니다.

```bash
$ node
> let a = 3, b = 4
undefined
> console.log(a + b)
7
undefined
> 
```

간단하게 노드 작동을 살펴봤습니다.

하지만 저렇게 사용하는 것은 테스트용일 뿐이고 파일로 실행하는 것이 일반 적이죠..

**a.js**

```javascript
let a = 3, b = 4
console.log(a + b)
$ node a
7
```

위와 같이 파일 a.js를 만들어 놓고 node로 실행하는 것입니다.

사실 노드의 역할은 이것입니다.

하지만 누군가 a.js가 아닌 ??.js를 엄청 잘 만들어 놨겠죠?

# npm

그 잘 만들어 둔 것들의 저장소가 npm 입니다.

개발계의 앱스토어 격이죠..

좋은 걸 발굴해서 잘 쓰기만하면 됩니다.



### <span style="color:green">03 익스프레스 설정</span>

익스프레스 설치 및 약간의 설명입니다.

# 익스프레스란

혹시 APM(Apache PHP MySQL) 아시는 분이라면 Apache + PHP 역할을 해준다고 생각하면 됩니다.  웹서버 기능과 파일 혹은 데이터 가공이 가능합니다.  RESTful한 api 설계를 쉽게 할 수 있습니다.

> RESTful api 예제
> [xxx.com/api/user](http://xxx.com/api/user) : post로 회원 등록
> [xxx.com/api/user/list](http://xxx.com/api/user/list) : get으로 회원들 조회
> [xxx.com/api/user/id](http://xxx.com/api/user/id) : put으로 회원 수정 [xxx.com/api/user/id](http://xxx.com/api/user/id) : delete로 회원 삭제

# 익스프레스 제네레이터 설치

순수 익스프레스가 아닌 미리 짜여진 골격으로 설치하기 위함입니다.

```bash
$ npm i express-generator -g
```

제네레이터를 전역으로 설치합니다. 자세한 경로는 아래에서 확인 가능합니다.

http://expressjs.com/en/starter/generator.html

# 익스프레스 설치

```bash
$ express --view=pug be
$ cd be
$ npm i
$ DEBUG=be:* npm start 
```

be라는 프로젝트로 익스프레스 고수들이 만들어 줬다고 생각하면 됩니다.

# 익스프레스 확인

브라우저로 [http://localhost:3000에](http://localhost:3000에/) 접속해서 웰컴 메세지가 나오면 성공입니다.



### <span style="color:green">04 익스프레스 수정</span>

생성된 익스프레스 소스를 수정해서 웹서버 동작 확인해보겠습니다.

# 익스프레스 구동 원리 확인

노드의 실행은 곧 node 어쩌고.js 인데 어떻게 실행되는 것일까요?

[expressjs.com](http://expressjs.com/) 에선 이렇게 하라고 하죠

```bash
$ DEBUG=be:* npm start
```

그러면 3000포트로 http서버가 열려서 브라우저에서 [http://localhost:3000](http://localhost:3000/) 을 입력하면 됩니다.

npm start라는 것은 무엇일까요?

그 비밀은 package.json이라는 파일에 있습니다.

파일을 열어보면

```json
"scripts": {
  "start": "node ./bin/www"
},
```

이 부분이 npm start 입니다.

결국 node ./bin/www 가 되는 것이죠.

특이하게도 확장자가 없이 만들어 놨는데 결국 자바스크립트 파일 입니다.

http서버를 여는 부분일 뿐이고 실제 중요한 파일은 app.js가 담당합니다.

# 익스프레스 수정

**app.js**

```javascript
var express = require('express');
var path = require('path');

var index = require('./routes/index');
var users = require('./routes/users');

var app = express();

// view engine setup
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'pug');

app.use(express.static(path.join(__dirname, 'public')));

app.use('/', index);
app.use('/users', users);

// catch 404 and forward to error handler
app.use(function(req, res, next) {
  var err = new Error('Not Found');
  err.status = 404;
  next(err);
});

// error handler
app.use(function(err, req, res, next) {
  // render the error page
  res.status(err.status || 500);
  res.render('error');
});

module.exports = app;
```

- path라는 모듈을 쓰는 이유는 윈도우, unix등의 호환 문제 때문입니다. window: \bin\www
  unix: /bin/www
- route의 [index, users]라는 파일을 각 [/,/users] 로 라우팅을 한것입니다.
  localhost:3000
  localhost:3000/users
- 만일 없는 패스를 지정하면 어떻게 될까?
  localhost:3000/xxx -> 많이 들어본 404 페이지가 나옵니다.

# pug란 무엇일까?

index.js를 보면 res.render(‘index’, { title: ‘Express’ }); 항목은

views/index.pug를 사용해 파일(index.html)을 만들었다고 생각하면 됩니다.

pug는 html을 편리하게 쓸 수 있는 툴이라고 보시면 됩니다.

주로 서버사이드에서 판단해서 페이지를 다르게 주고 싶을 때 사용하게 됩니다.(*php와 비슷합니다.*)

현재 프로젝트에서는 vue를 이용해 정적인 페이지를 사용할 것이기 때문에 필요가 없습니다.

어떤 동작을 하는지 정도만 파악하면 될 것 같습니다.



### <span style="color:green">05 익스프레스 라우터</span>

생성된 익스프레스 소스에 라우터, 페이지를 추가해봅니다.

# 익스프레스 라우터 추가

브라우저에서 http://localhost:3000/users에 가면

respond with a resource 라는 텍스트가 있습니다.

그 이유는

**app.js**

```javascript
var usersRouter = require('./routes/users');
app.use('/api', usersRouter);
```

**routes/users.js**

```javascript
router.get('/', function(req, res, next) {
  res.send('respond with a resource');
});
```

이렇게 라우터가 구현되어 있기 때문입니다.

라우터 추가는 비슷하게 따라해보면 되겠죠?

**app.js**

```javascript
var set = require('./routes/set');
app.use('/api', set);
```

**routes/set.js**

```javascript
router.get('/', function(req, res, next) {
  res.send('나는 셋라우터입니다.');
});
```

http://localhost:3000/set 으로 가면 라우터 추가가 잘 된 것을 확인할 수 있습니다.

# 스태틱라우터란: 정적인 파일

app.use(express.static(path.join(__dirname, ‘public’)));

이 항목은 public 디렉토리를 정적인 파일들을 담을 수 있는 그릇으로 만든 것입니다.

public 디렉토리에 아래의 index.html을 만들어 넣게 되면?

**public/index.html**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    hi?
</body>
</html>
$ npm start
```

[http://localhost:3000을](http://localhost:3000을/) 들어가보면 hi?가 있다는 것을 확인 할 수 있습니다.

그러면 원래 있던 welcome to express는 어떻게 된것일까요?

# 라우트 우선순위

라우트 우선순위는 선언 순이며 그중 하나가 응답을 해버리면 더이상 아래로 내려가지 않습니다.

http프로토콜 자체가 요청과 응답이 한 쌍으로 이루어져있습니다.

요청이 왔을 때 두번 응답할 수 없습니다.

응답후 이미 연결은 종료된 상태이기 때문이죠..

현재 라우트 순서는

1. public
2. /
3. /users
4. /알수 없는 페이지

와 같습니다.

public에 index.html을 만들어 버렸기 때문에(응답해버림) 2번 항목으로 내려가지 못한것입니다.

위의 라우터중 갈 곳이 없다면 맨 마지막 라우터 즉 알 수 없는 페이지인 404로 가게 됩니다.

```javascript
// catch 404 and forward to error handler
app.use(function(req, res, next) {
  next(createError(404));
});

// error handler
app.use(function(err, req, res, next) {
  // set locals, only providing error in development
  res.locals.message = err.message;
  res.locals.error = req.app.get('env') === 'development' ? err : {};

  // render the error page
  res.status(err.status || 500);
  res.render('error');
});
```

views/error.pug를 렌더링 하게 되는 것이죠.



### <span style="color:green">06 뷰티파이란</span>
### <span style="color:green">07 뷰티파이 설치</span>
### <span style="color:green">08 익스프레스와 뷰티파이 연동</span>
### <span style="color:green">09 뷰티파이 수정</span>
### <span style="color:green">10 뷰티파이 추가</span>
### <span style="color:green">11 익스프레스와 뷰라우터</span>
### <span style="color:green">12 뷰티파이 콤포넌트 사용해보기</span>
### <span style="color:green">13 자바스크립트 언어 사용 시작에 대해</span>





## <span style="color:blue">2. **모던웹(NEMV) 제작 기본편**</span>

### <span style="color:green">14 자바스크립트 기본</span>
### <span style="color:green">15 뷰티파이 레이아웃</span>
### <span style="color:green">16 깃 사용하기</span>
### <span style="color:green">17 SPA란</span>
### <span style="color:green">18 API 정리</span>
### <span style="color:green">19 axios 사용하기</span>
### <span style="color:green">20 RESTful한 api 만들기</span>
### <span style="color:green">21 몽고디비 설치</span>
### <span style="color:green">22 몽고디비 설치 확인</span>
### <span style="color:green">23 몽구스 설치 및 확인</span>
### <span style="color:green">24 api와 몽구스 연결</span>
### <span style="color:green">25 API 와 프론트 통신 정리</span>
### <span style="color:green">26 기본편 정리</span>





## <span style="color:blue">3. **모던웹(NEMV) 제작 응용 서버편**</span>

### <span style="color:green">27 클라우드 서버 가입하기</span>
### <span style="color:green">28 클라우드 서버 만들기</span>
### <span style="color:green">29 클라우드 서버 리눅스 다루기</span>
### <span style="color:green">30 클라우드 서버 노드 설치</span>
### <span style="color:green">31 클라우드 서버 깃 설치 및 테스트</span>
### <span style="color:green">32 클라우드 서버 디비 설치 및 테스트</span>
### <span style="color:green">33 배포를 위한 개발환경 설정</span>
### <span style="color:green">34 pm2로 안정적인 서버 만들기</span>
### <span style="color:green">35 pm2로 실제 서버에 배포하기</span>
### <span style="color:green">36 서버 오토스케일 정리</span>



## <span style="color:blue">4. **모던웹(NEMV) 제작 응용 사용자편**</span>

### <span style="color:green">37 몽고 클라우드(ATLAS) 가입 및 테스트</span>
### <span style="color:green">38 깃험에서 안보이는 설정파일 만들기</span>
### <span style="color:green">39 API 미들웨어란?</span>
### <span style="color:green">40 토큰(JWT)이란?</span>
### <span style="color:green">41 프라미스(promise) 어씽크(async) 이정도만 하자!</span>
### <span style="color:green">42 HTTP 헤더 알아보기</span>
### <span style="color:green">43 사이트 저장소 다루기</span>
### <span style="color:green">44 로그인 간단히 만들어보기</span>
### <span style="color:green">45 사용자 모델 정리하기</span>
### <span style="color:green">46 실제 데이터로 로그인하기</span>
### <span style="color:green">47 토큰 인증하기</span>
### <span style="color:green">48 로그인 해야 들어갈 수 있는 페이지 만들기(네비게이션 가드)</span>
### <span style="color:green">49 뷰저장소(vuex) 이정도만 쓰자</span>
### <span style="color:green">50 사용자 및 페이지 관리하기</span>
### <span style="color:green">51 백엔드로 페이지 권한 얻기</span>
### <span style="color:green">52 모든 요청 토큰 설정으로 접근 막기</span>
### <span style="color:green">53 새로고침 없이 로그인 하기(by 인터셉터)</span>
### <span style="color:green">54 한 소스로 사이트 다르게 사용하기</span>
### <span style="color:green">55 회원가입 유효성 판단</span>
### <span style="color:green">56 회원가입 프론트 적용하기</span>
### <span style="color:green">57 회원가입 완성하기</span>
### <span style="color:green">58 사용자편 정리</span>





## <span style="color:blue">5. **모던웹(NEMV) 제작 고급편**</span>

### <span style="color:green">59 비밀번호 암호화하기</span>
### <span style="color:green">60 뷰 컴포넌트 사용하기</span>
### <span style="color:green">61 시간 계산하기(moment)</span>
### <span style="color:green">62 로그인 시간 제한하기(토큰 갱신)</span>
### <span style="color:green">63 게시판 관리 만들기</span>
### <span style="color:green">64 게시판 모델 만들기(populate)</span>
### <span style="color:green">65 게시판을 위한 메뉴 구성</span>
### <span style="color:green">66 게시판 정보 읽기</span>
### <span style="color:green">67 게시판 게시물 API 만들기</span>
### <span style="color:green">68 게시판 게시물 쓰고 읽기</span>
### <span style="color:green">69 게시판 뷰티파이 테이블 사용하기</span>
### <span style="color:green">70 게시판 내용 읽기</span>
### <span style="color:green">71 게시판 내용 수정과 삭제</span>
### <span style="color:green">72 게시판 페이징과 정렬 처리하기</span>
### <span style="color:green">73 게시판 재활용하기(뷰라우터)</span>
### <span style="color:green">74 공용 알림 메세지 만들기(vuex)</span>
### <span style="color:green">75 HTTP 예외처리 제대로 하기</span>
### <span style="color:green">76 반응형 게시판 만들기</span>
### <span style="color:green">77 구글 리캡챠로 로봇 막아보기(recaptcha)</span>
### <span style="color:green">78 고급편 정리</span>



## <span style="color:blue">6. **모던웹(NEMV) 제작 활용편**</span>

### <span style="color:green">79 보안연결(ssl) 적용하기</span>
### <span style="color:green">80 구글 애널리틱스로 사이트 현황 파악하기</span>
### <span style="color:green">81 대시보드 게시판 다르게 표현하기</span>
### <span style="color:green">82 대시보드 꾸며보기</span>
### <span style="color:green">83 파일 업로드 하기(multer)</span>
### <span style="color:green">84 이미지 변환하기(base64, sharp)</span>
### <span style="color:green">85 이미지 컴포넌트로 업로드하기(filepond)</span>
### <span style="color:green">86 사용자 정보 표시하기</span>
### <span style="color:green">87 위지웍 에디터 사용하기(toast ui editor)</span>
### <span style="color:green">88 게시물에 댓글 추가하기</span>
### <span style="color:green">89 활용편 정리</span>

