# XCOPY 사용법

### 1. xcopy 백업의 장점

1. 백업된 데이타는 똑 같은 상태이기때문에 즉시 사용이 가능합니다.
2. 바뀐 파일만 복사하는 옵션을 걸면 시간도 그렇게 걸리지않습니다.
3. 단순한 커맨드로 만들어지기때문에 편집해서 재사용하기가 쉽습니다.



### 2. 단점

1. 편집중인 데이타를 제대로 복사할수없습니다.때문에 PC를 사용하지않은 시간에 백업을 하는것이 좋습니다.특히 메일데이타 백업의 경우 백업성공,실패여부를 확인해야합니다. 

2. 압축하지않기때문에 용량을 많이 차지합니다.



### 3. 백업커맨드

 **1) 개인의 데이타를 백업할 때 사용하세요.. xcopy \\pc1-name\folder-name\*.\* "\\pc2-name\folder-name" /d /s /c /y /i**
소스폴더아래의 모든 파일을 바뀐것만 타겟폴더로 xcopy한다.



**2) 파일서버의 데이타를 백업할 때 사용하세요.. (보안속성,소유권,감사 속성까지)** 
**xcopy e:\*.\***  **\\backupsrv\e$\**  **/d /e /c /y /i /h /g /k /o /x**
e드라이브의 모든 파일을  빈폴더를 포함해서  타켓폴더로 xcopy한다. (바뀐것만, 보안속성 포함 )

/d  : 소스파일과 타겟파일을  비교하여 새로운 것만 복사한다.
/e  : 모든 서브디렉토리를 포함하여 복사한다. (빈 폴더 포함)  --> 빈폴더 제외는 /s 옵션
/c  :  오류가 발생하더라도 중단하지 말고 계속 복사 (깨진 파일때문에 복사가 중단되는 일이 있음)
/y  :   덮어쓰기 할때 묻지않고 복사한다.
/i   :  복사할 대상이 존재하지 않거나 하나이상의 파일을 복사할때 타켓을 디렉토리로 인식한다.
/h  :  숨김 파일이나 시스템 파일도 복사한다.
/g  : 암호화파일을 복사
/k  :  파일의 속성을 복사 (이 옵션을 빼면 read-only 속성을 리셋한다.)
/o  : 파일의 소유권과 ACL 정보까지 복사한다.
/x  : 감사 속성을 복사한다.  



### 4. 백업원칙

1. 소스DISK와 타겟DISK는 달라야합니다. (같은 HDD안에서 백업은 의미없음)
2. 소스PC와 타겟PC가 다른 것이 이상적. (다른 PC에 백업하는것을 추천)
3. 백업작업은 자동화

​      단, OS재설치시 스케쥴링 작업은 다시 잡아주어야하죠..)



###  5. xcopy에 의한 스케쥴링 백업 하기

1. 타겟이 되는 pc에 공유를 만들고 권한을 부여
2. 위 xcopy 명령을 배치파일(.bat)로 만듭니다. (시스템드라이브를 피할것->재사용가능)
3. 프로그램/보조프로그램/시스템도구/예약된 작업 실행
4. 예약작업추가 (찾아보기버튼을 통해 사전에 만들어둔 *.bat선택)
5. 시간예약을 한다(이때 권한있는 계정과 password 지정해야함)
6. 그냥완료하지말고 advanced옵션을 선택해서.. 추가적인 스케쥴입력
    하나의 작업을 여러시간대에 스케쥴링 가능



### 6. XCOPY 사용법 

```
XCOPY 원본 [대상] [/A | /M] [/D[:데이터]] [/P] [/S [/E]] [/V] [/W]
[/C] [/I] [/Q] [/F] [/L] [/G] [/H] [/R] [/T] [/U]
[/K] [/N] [/O] [/X] [/Y] [/-Y] [/Z]
[/EXCLUDE:파일1[+파일2][+파일3]...]
```



**원본** -  복사할 파일을 지정합니다.
**대상** -  새 파일의 디렉터리와 또는 파일 이름을 지정합니다.
**/A** - 보관 특성을 가진 파일을 복사하며, 보관 특성을 수정하지 않습니다.
**/M** - 보관 특성을 가진 원본 파일을 복사하며, 보관 특성을 지웁니다.
**/D:m-d-y** - 지정된 날짜 이후에 바뀐 파일만 복사합니다.
                    날짜가 지정되지 않으면, 대상 파일보다 새로운 원본 파일만 복사합니다.
/**EXCLUDE:파일1[+파일2][+파일3]...**
               문자열을 포함하는 파일 목록을 지정합니다.각 문자열은 파일의 다른 행에 있어야 합니다.일부 문자열이  복사할 파일의 절대 경로의 일부분과 일치하면 복사할 파일에서 제외됩니다. 예를 들면, \obj\ 또는 .obj에서는 obj 디렉터리 내의 모든 파일을 제외하거나 .obj 확장자를 갖는 모든 파일을 제외합니다.

**/P** - 각 대상 파일을 만들기 전에 물어봅니다.
**/S** - 비어 있지 않은 디렉터리와 하위 디렉터리를 복사합니다.
**/E** - 디렉터리와 하위 디렉터리를 (비어 있어도) 복사합니다.
**/S**  - /E 스위치와 같으며, /T를 수정하는 데 사용될 수 있습니다.
**/V** - 각각의 새 파일을 확인합니다.
**/W** - 복사하기 전에, 아무 키나 누르라고 프롬프트합니다.
**/C** - 오류가 생겨도 복사를 계속합니다.
**/I**  - 대상을 찾을 수 없고 두 파일 이상을 복사하면, 대상을 디렉터리로 지정합니다.
**/Q** - 복사하는 동안 파일 이름을 표시하지 않습니다.
**/F** - 복사하는 동안 원본과 대상 파일의 전체 경로 를 표시합니다.
**/L** - 복사는 하지 않고, 복사할 파일을 표시만 합니다.
**/G** - 암호화 기능을 지원하지 않은 대상에 암호화된 파일을 복사하도록 허용합니다.
**/H** - 숨겨진 파일과 시스템 파일도 복사합니다.
**/R** - 읽기 전용 파일을 겹쳐 씁니다.
**/T**  - 파일은 복사하지 않고 디렉터리 구조만 복사합니다. 빈 디렉터리와 하위 디렉터리는 포함되지 않습니다.

**/T**  - **/E** 스위치를 함께 사용하면 빈 디렉터리와 하위 디렉터리를 포함합니다.
**/U** - 대상에 이미 있는 파일을 업데이트합니다.
**/K**  - 특성을 복사합니다. 일반적으로 Xcopy는 읽기 전용 특성을 지웁니다.
**/N** - 만들어진 짧은 파일 이름을 사용하여 복사합니다.
**/O** - 파일 소유권과 ACL 정보를 복사합니다.
**/X** - 파일 감사 설정을 복사합니다(/O 의미).
**/Y** - 이미 있는 대상 파일을 덮어쓸지를 확인하기 위해 묻는 것을 금합니다.
**/-Y** - 이미 있는 대상 파일을 덮어쓸지를 확인하기 위해 묻습니다.
**/Z** - 다시 시작할 수 있는 모드에서 네트워크 파일을 복사합니다.



출처: http://blog.naver.com/PostView.nhn?blogId=istarting&logNo=130128210521



#### 출처 에는 위 명령 이외의 DB 백업과 관련된 작업도 기술 되어 있음 필요시 참조









