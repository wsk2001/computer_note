# Windows(윈도우)에서 ROBOCOPY를 이용한 파일 백업

출처: https://server-talk.tistory.com/163

리눅스를 이용하시는 분들은 rsync, cp 명령으로 이용하여 파일을 백업, 일치화, 복사를 하면 되지만 윈도우를 이용하시는 분들은 리눅스 처럼 rsync, cp 도구 같은 도구를 지원혹은 유료로 구매하여야 되더군요

다른건 몰라도 백업 도구를 사용하기 위해 구매해야된다는 부분의 좀 그렇다고 느꼈습니다

윈도우 기능중에서 파일 복사, 백업, 일치화 기능이 지원하는것이 없는지 찾아보다가 **ROBOCOPY라는 강력한 복사 도구가 찾게**되었습니다.

### **ROBOCOPY 도구란?**

ROBOCOPY는 Windows 명령(CMD) 명령 행에서 가장 강력한 도구라고 생각되며, 윈도우에서 사용할 수 있는버전은 Windows vista 이상부터 사용이 가능합니다

ROBOCOPY는 XCOPY의 업그레이드 버전으로 로컬 또는 네트워크 파일을 복사 또는 일치화를 할수 있습니다.



### **ROBOCOPY 기능**

ROBOCOPY의 도구를 가장 많이 쓰는 옵션은 /MIR 옵션이며, 이 옵션은 미러링 옵션입니다

/MIR 옵션의 기능은 [복사해야될 내용] [복사한 내용]의 으로 지정을 한후 이미 저장되어 있는 파일 목록을 검사한 후에 복사한 내용을으로 복사하는 것입니다

이러한 엄청난 기능이 있으며 경로지정을 잘못하고 사용할 경우에는 큰 문제가 발생할 수 있습니다



### **ROBOCOPY의 장점**

```
* 많은 양의 파일을 복사할 수 있습니다.
* 진행표시기를 표시합니다.
* 복사 멀티 스레딩을 할 수 있습니다.
* 속성, 소유자 정보, 날짜 등도 변경할 수 없는 파일 사용 권한을 유지하고 속성으로 정확하게 모든 정보를 복사 합니다.
* log파일로 백업, 일치화 진행내역을 저장할수 있습니다.
```



### **ROBOCOPY 옵션**

```
/E : 비어있는 디렉터리를 포함하여 하위 디렉터리를 복사합니다
/R:[횟수] : 오류의 경우 재시도 횟수 입니다
/W:[횟수] : 다시시도 대기시간 입니다
/MOV : 파일을 이동합니다(복사후 원본데이터는 삭제 됩니다)
/MOVE : 파일 및 디렉터리를 이동합니다(복사후 원본데이터는 삭제 됩니다)
/V : 자세한 정보를 출력하며 건더뛴 파일을 표시합니다
/L : 목록 전용 - 파일을 복사 또는 삭제하거나 타임스탬프를 만들지 않습니다
/FP : 출력되는 파일의 전체 경로 이름을 포합합니다
/Z : 다시 시작 모드에서 파일을 복사합니다
/MAX:[크기] : 최대 파일 크기 - 옵션에 크기가 초과한 파일을 제외합니다.
/MIN:[크기] : 최소 파일 크기 - 옵션에 크기가 미만인 파일을 제외합니다.
/MAXAGE:[날짜] : 최대 파일 사용기간 - 옵션의 날짜보다 오래된 파일을 제외합니다
ex) /MAXAGE:20170804
/MINAGE:[날짜] : 최소 파일 사용기간 - 옵션의 날짜보다 최신의 파일을 제외합니다
ex) /MINAGE:20170804
/RH: HHMM-HHMM : 실행시간 - 새 복사본을 시작할 수 있는 시작시간 입니다
/LOG:[파일이름] : 실행시 상태를 로그파일에 출력합니다. (기존 로그에 덮어씁니다)
/LOG+:[파일이름] : 실행시 상태를 로그파일에 출력합니다. (기존 로그에 추가합니다)
/MIR : 디렉토리 트리를 미러링합니다 (복사하는 데이터를 일치화 합니다)
```

ROBOCOPY는 많은 옵션이 있으며, 그중에 많은 사용하는 옵션들을 추려 보았습니다 또 **가장많이 사용하는 옵션은 굵은 표시**로 하였습니다.



### **ROBOCOPY 사용법**

ROBOCOPY를 사용하시려면 CMD 실행시켜 명령어를 다음과 같이 입력하여야 됩니다.

```
ROBOCOPY 사용법 : ROBOCOPY [원본_디렉터리] [대상_디렉터리] [옵션]

원본디렉터리 경로 : C:\test
원본 네트워크 디렉토리 경로 : X:\test
      (공유디렉토리 연결 - net use X: \\192.168.253.134\C$  "server!23" /user:Administrator)

대상디렉토리 경로 : C:\backup
```



**ROBOCOPY를 이용한 일치화 카피<미러링 기법>**

```
ROBOCOPY C:\test C:\backup /MIR
```



위와 같은 명령어를 사용시 하위디렉토리까지 카피하며 원본에는 없는 파일이나 디렉토리를 자동으로 삭제하여 줍니다





**ROBOCOPY를 이용한 네트워크에서 연결된 서버혹은 PC에서 파일 카피**



```
ROBOCOPY X:\test C:\backup /MIR
```



위와 같은 명령어는 net use 명령을 이용하여 네트워크 서버와 서버간의 파일을 백업할때 주로 사용하는 명령어입니다.





**ROBOCOPY를 이용한 파일 복사**



```
ROBOCOPY X:\test C:\backup /E
```



위와 같은 명령어는 비어있는 디렉토리를 포함하여 디렉토리를 모두 복사합니다.







**ROBOCOPY를 이용한 실행시 상태를 로그파일에 저장**



```
ROBOCOPY X:\test C:\backup /MIR /LOG+"C:\LOG\robocopy.log"
```



위와 같은 명령어는 실행시에 정상적으로 파일을 복사가 되었는지 확인하실때 쓰는 옵션이, /LOG+"[로그를 저장할 파일경로의 이름]" 옵션으로 넣어 저장할 파일경로의 이름을 넣어 주시면 됩니다.

