# **실전 윈도우 디바이스 드라이버**

업무적으로 필요에 의해 Windows Device Driver 관련 책을 찾던중 가장 최근에(2015) 출간된 책을 발견 하게 되었다. 그런데 대부분의 온라인 서점에는 절판이 되었다.  간신히 교보문고 를 통하여 구매 할 수 있게 되어다.

아래 책 소개 및 목차를 참조하여 필요한 Device Driver 를 개발 할 예정이다.



## **책소개**

[실전 윈도우 디바이스 드라이버]는 디바이스 드라이버 개발에 처음 입문할 때 꼭 읽어봐야 할 부분인 기본편(1장과 2장)과 실무에서 장치유형별(디스크, HID, I2C, 오디오, 커널 코드 가로채기, PCIe) 디바이스 드라이버를 개발하는 개발자들을 위한 응용편(3장부터 8장까지), 크게 두 부분으로 나뉜다. 따라서 디바이스 드라이버 개발에 처음 입문하는 독자들이나 실무에서 실제 하드웨어를 가지고 윈도우 운영체제에서 동작하는 디바이스 드라이버를 만들어야 하는 독자 모두를 만족시킬 수 있는 책이 될 것이다.



## **목차**

  실전 윈도우 디바이스 드라이버 紐⑹감

1부. 기본편 
1장 디바이스 드라이버 기초 
1.1 디바이스 드라이버란? 
1.1.1 기본 설명 
1.1.2 레거시 드라이버 
1.1.3 PNP 드라이버 
1.2 개발 툴 설치 
1.2.1 WDK 
1.2.2 WDM, KMDF 그리고 UMDF 
1.3 개발 시작 전 검토 사항 
1.4 설치 파일 
1.4.1 Version 섹션 
1.4.2 SourceDisksNames 섹션 
1.4.3 SourceDisksFiles 섹션 
1.4.4 DestinationDirs 섹션 
1.4.5 Manufacturer 섹션 
1.4.6 Strings 섹션 
1.4.7 Models 섹션 
1.4.8 DDInstall 섹션 
1.5 WDK 빌드 
1.5.1 WDK 7600 콘솔 빌드 환경 
1.5.2 WDK 8 Visual Studio 빌드 환경 
1.6 디버깅 툴 
1.6.1 DebugView 
1.6.2 WinDBG 
1.7 WHCK 인증에 대해서 
1.7.1 드라이버 인증의 의미 
1.7.2 embedded signing 
1.7.3 INF signing 

2장 드라이버의 기본 
2.1 디바이스 스택 
2.2 WDM(Windows Driver Model) 
2.2.1 IRP(IO Request Packet) 
2.2.2 필수 루틴 
2.2.3 WDM 드라이버 보충 기술 
2.2.4 WDM 드라이버 샘플 분석 
2.3 WDF(Windows Driver Foundation) ? KMDF 
2.3.1 WDF 프레임워크 
2.3.2 WDF 오브젝트 
2.3.3 Event 함수들 
2.3.4 WDF(KMDF) 드라이버 샘플 분석 

2부. 응용편 
3장 디스크 드라이버 
3.1 디스크 드라이버를 만들기 위해서 알아야 하는 것 
3.1.1 디스크 드라이버를 만들어서 무엇을 할 수 있을까? 
3.1.2 WDK 
3.2 SATA(Serial ATA)에 대한 소개 
3.2.1 SATA 개념 
3.2.2 AHCI 에 대해서 
3.2.3 NCQ(Native Command Queue) 
3.3 NVMe(Non Volatile Memory Express)에 대한 소개 
3.4 윈도우 스토리지 드라이버 모델 
3.4.1 SCSI 미니포트 드라이버 
3.4.2 Scsi 미니포트 드라이버 샘플 분석 
3.4.3 Storport 미니포트 드라이버 
3.5 **윈도우 애플리케이션과 패스 스루 인터페이스** 
3.6 MS WDK가 제공하는 AHCI SATA 호스트 컨트롤러 드라이버 
3.6.1 ATAPort 미니포트 드라이버 의 주요 콜백함수소개 
3.6.2 마이크로소프트 SATA 미니포트 드라이버 샘플 예제 분석 
3.6.3 드라이버 설치 
3.6.4 **윈도우 응용프로그램과 패스 스루 인터페이스(ATA)** 
3.7 NVMe Evaluation 드라이버 
3.8 스토리지 클래스 드라이버 
3.8.1 파일시스템 볼륨과 스토리지 볼륨 
3.8.2 디스크 드라이버와 스토리지 볼륨 
3.8.3 디스크 스토리지 클래스 드라이버 

4장 HID 디바이스 드라이버 
4.1 HID드라이버를 만들기 위해서 알아야 하는 것 
4.1.1 HID드라이버를 만들어서 무엇을 할 수 있을까? 
4.1.2 WDK 
4.2 HID에 대한 소개 
4.2.1 HID 관계도를 이해하자 
4.2.2 HID 애플리케이션 컬렉션과 윈도우 장치 열거 
4.2.3 HID 디스크립터 
4.2.4 리포트 디스크립터 
4.2.5 아이템의 이해 
4.2.6 아이템의 인코딩 
4.2.6.1 짧은 인코딩 
4.2.6.2 긴 인코딩 
4.2.7 리포트 리스크럽터의 예제 
4.3 윈도우 HID 클래스 디바이스 
4.3.1 HIDCLASS.SYS 라이브러리와 미니드라이버 
4.3.2 HID 응용프로그램 라이브러리 
4.4 디바이스드라이버실습 
4.4.1 드라이버샘플 빌드, 설치 
4.4.2 응용프로그램 테스트 
4.4.3 응용프로그램 주요 설명 
4.4.4 드라이버 주요 소스 설명 
4.5 HID 하위 프로토콜 
4.5.1 HID Over USB 
4.5.2 HID Over I2C 
4.6 맺음말 

5장 I2C 드라이버 
5.1 I2C 클라이언트 드라이버를 만들기 위해 알아야 하는 것 
5.1.1 I2C 클라이언트 드라이버를 만들어서 무엇을 할 수 있을까 
5.1.2 WDK 
5.2 I2C에 대한 소개 
5.2.1 I2C 관계도를 이해하자 
5.2.2 I2C 기본 통신규약 
5.3 윈도우8과 I2C 버스 
5.3.1 ACPI와 I2C 
5.3.2 SPB 프레임워크 
5.4 디바이스 드라이버 실습 
5.4.1 솔루션 빌드 
5.4.2 설치 파일 분석 
5.4.3 응용프로그램, 드라이버 주요 소스 분석 
5.5 참고 사이트 정보 

6장 오디오 드라이버 
6.1 오디오 드라이버를 만들기 위한 준비 
6.1.1 오디오 드라이버를 만들어서 무엇을 할 수 있을까 
6.1.2 WDK 
6.1.3 내가 부족한 것은 무엇인가 
6.2 본격적으로 공부해보자 
6.2.1 C++ 과 COM 인터페이스에 대한 간단한 학습 
6.2.2 WDK 문서를 통한 학습 
6.3 간단한 오디오 드라이버를 만들자 
6.3.1 간단한 오디오 드라이버를 설치하기 위한 설치파일구성(INF) 
6.3.2 간단한 오디오 드라이버를 빌드하기 위한 파일구성 
6.3.3 간단한 오디오 드라이버 빌드, 설치 및 운용 
6.3.4 간단한 오디오 드라이버 중요 코드 분석 
6.4 AVSteam 드라이버 모델 소개 
6.4.1 AVStream 객체 계층도와 필터 생성 
6.4.2 필터중심/핀중심 AVStream 드라이버 개발 방법 
6.4.2.1 필터 중심 드라이버의 Process 콜백 함수 
6.4.2.2 핀 중심 드라이버의 Process 콜백 함수 

7장 커널 코드 가로채기 
7.1 코드 가로채기의 이해 
7.2 예재 보안솔루션 소개 
7.2.1 커널 스트림의 가로챌 위치를 결정한다 
7.2.2 커널 스트림 코드를 찾자 
7.2.3 커널스트림코드를 가로채는 코드를 심자 
7.2.4 후커의 내용을 살펴보자 
7.3 64비트 환경에서 구현하는데 필요한 요소 
7.3.1 PG 무력화 
7.3.2 64비트 어셈블리어 환경과 콜링 컨벤션 
7.4 소스 설명, 솔루션 빌드 및 사용 방법 
7.4.1 드라이버 소스 설명 
7.4.2 응용프로그램 소스 설명 
7.4.3 64비트 환경에서 드라이버 동작하기 
7.4.4 테스트 

8장 PCI(PCIe) 디바이스 드라이버 
8.1 PCI 버스와 PCIe 버스에 대한 소개 
8.1.1 PCI버스 
8.1.2 PCIe 버스 
8.2 윈도우 와 PCI(PCIe) 버스 
8.3 PCI 디바이스 드라이버의 기본 구조 
8.3.1 PCI 디바이스 드라이버 작성자가 자주 사용하는 운영체제 제공 함수 
8.3.2 설치 파일에서 고려할 부분 
8.3.3 리소스 다루기 
8.4 WDM PCI 샘플 드라이버 소개 
8.4.1 PCI 샘플 드라이버 설치와 테스트 응용프로그램 실행 
8.4.2 PCI 샘플 드라이버 소스 분석 
8.5 사용자 레벨에서 PCI 디바이스 다루기(DM-II 소개)  