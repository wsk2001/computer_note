# 쉘 스크립트 완전 공략 가이드

# 쉘 스크립트의 세계에 오신 것을 환영합니다!

## 쉘 스크립트는 무엇입니까?

쉘 스크립트는 평상시 Bash 등의 쉘로 실행하고 있는 커멘드를 나란히 해, 정리해 실행할 수 있도록 한 것입니다. 파일의 백업, 로그 파일의 해석, 시스템의 셋업 등, 터미널에서 실시하고 있던 일련의 작업을 정리해 쉘 스크립트에 기술하는 것으로, 쉘 스크립트를 실행하는 것만으로 자동적으로 일련의 작업을 끝내는 것 수 있습니다. 또한 쉘 스크립트는 파일에 저장되므로 재사용하기 쉽습니다.

쉘 스크립트에서 사용하는 많은 명령은 UNIX 명령이 될 것입니다. 따라서 쉘 스크립트를 작성할 때 UNIX 명령에 대해 어느 정도 지식이 있다고 가정합니다. 다음 기사 등을 참고로 UNIX 명령에 대해서도 배워 두는 것을 추천합니다.



## 쉘 스크립트는 언제 사용합니까?

쉘 스크립트에서는 변수나 조건 분기, 루프 처리 등의 다른 프로그래밍 언어에도 있는 것 같은 기능을 사용할 수 있으므로, 조금 복잡한 처리도 쓸 수 있습니다. 그러나 언어 사양과 실행 속도의 관계로 대규모 시스템 개발에는 적합하지 않습니다. 쉘 스크립트는 다음과 같은 경우에 사용하는 것이 좋습니다.

- **정기적 인 시스템 유지 보수**
  파일 백업, 로그 분할, 압축 및 삭제, 시스템 상태 확인 등 정기적 인 작업 자동화
- **간단한 데이터 처리**
  파일 검색, 텍스트 처리, 간단한 집계 등 UNIX 명령을 결합한 데이터 처리
- **시스템 설정 및 배포**
  소프트웨어 설치, 구성 파일 편집, 서비스 시작 및 중지 등 시스템 초기화 및 업데이트 자동화
- **테스트 스크립트 작성**
  시스템 및 애플리케이션의 동작을 확인하기 위한 간단한 테스트 스크립트

다른 프로그래밍 언어와 비교했을 때의 장점, 단점도 소개합니다.

### 장점

- **쉘과 같은 언어로 쓸 수 있다**
  평소 쉘상에서 작업을 하고 있는 경우, 쉘상에서의 수작업을 몇번인가 반복해 귀찮게 되면, 그 흐름을 쉘 스크립트에 그대로 쓰면 좋을 뿐입니다. 또, 쉘 스크립트용으로 쉘의 구문을 배우는 것으로, 평상시의 쉘상에서의 작업에도 살릴 수가 있습니다.
- **다른 프로그래밍 언어에 비해 짧은 코드로 처리할 수 있다**
  . 파일로의 출력은 `>`(리디렉션)으로 할 수 있고, 커멘드의 실행 결과를 다른 커멘드에 건네주는 것도, 변수를 개입시키지 않고 `|`(파이프)로 연결하는 것만으로 가능합니다.

### 단점

- **처리 속도가 느립니다**
  . 쉘 스크립트는 외부 명령의 시작이 느리기 때문에 외부 명령을 자주 시작하면 시작 비용이 들고 성능이 저하됩니다.
- **대규모 응용 프로그램 개발에는 적합하지 않습니다.**
  쉘 스크립트는 구조와 계층 구조를 가진 데이터 구조를 다룰 수 없습니다. 또한 위의 처리 속도 문제가 있기 때문에 대규모 응용 프로그램 개발에는 적합하지 않습니다. 쉘 스크립트의 규모가 커지면 다른 프로그래밍 언어로의 전환을 고려해야 합니다.

쉘 스크립트를 사용할 때는 위의 사항을 염두에 두십시오.

여기까지는 쉘 스크립트의 특징에 대해 해설했습니다. 여기에서는 실제로 쉘 스크립트를 어떻게 쓰면 좋은가를 해설해 갑니다!

# 1. 쉘 스크립트의 작성과 실행을 체험하자

## (1-1) 쉘 스크립트 파일을 작성합시다.

터미널에서 `test.sh`이름이 붙은 쉘 스크립트를 작성해 봅시다.

단말기

```
$ touch test.sh
```



**쉘 스크립트의 확장자에 대해**
기본적으로 `.sh`붙이자.

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">상세한</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="79:1-79:366" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p></div></details>

## (1-2) 쉘 스크립트 파일을 편집합시다.

작성한 것을 `test.sh`좋아하는 에디터에서 아래와 같이 편집해 봅시다.

test.sh

```
#!/bin/bash

echo 'Hello world!'
```



**shebang**
스크립트 줄 머리 `#!`로 시작하는 행을 `shebang`(셰반/셰뱅/시반)이라고 합니다.

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">상세한</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="96:1-96:635" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p></div></details>



**`#!/bin/bash`과의`#!/bin/sh`**
구분 기본적으로　**사용**`#!/bin/bash`　하는 것이 좋을 것 같습니다.

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">상세한</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><ul data-sourcepos="104:1-105:435" style="padding: 0px 0px 0px 1.5em; margin: 16px 0px; box-sizing: inherit; list-style: disc;"><li data-sourcepos="104:1-104:337" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li><li data-sourcepos="105:1-105:435" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li></ul></div></details>



아래에서는 `#!/bin/bash`쉘 스크립트에 대해 설명합니다.

## (1-3) 쉘 스크립트에 실행 권한을 부여합시다.

터미널에서 `test.sh`실행 권한을 부여합시다.

단말기

```
$ chmod +x test.sh
```

## (1-4) 쉘 스크립트를 실행해 봅시다.

터미널에서 `test.sh`실행해 봅시다.

단말기

```
$ ./test.sh
Hello world!
```



**쉘 스크립트의 실행 방법에 대해서**
실행 권한을 붙인 파일명을 직접 지정해 실행합시다.

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">상세한</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="130:1-130:708" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p></div></details>

## (1-5) 쉘 스크립트에 주석을 달자.

`test.sh`편집하고 댓글을 달자. 쉘 스크립트의 주석은 `#`붙일 수 있습니다. 주석 처리된 명령은 실행되지 않습니다.

test.sh

```
#!/bin/bash

# 여기는 코멘트입니다.
# echo '이 행은 실행되지 않습니다.'

echo 'Hello world!' # 줄의 중간에서도 주석을 달 수 있습니다.
```

단말기

```
$ ./test.sh
Hello world!
```

## (1-6) 쉘 스크립트에서 여러 명령을 실행해 봅시다.

- **개행으로 단락하는 경우**
  쉘 스크립트에서는 기본적으로 1개의 행에 1개의 커멘드를 써 갑니다만, 이때 개행이 1개의 커멘드를 단락짓는 역할을 하고 있습니다. 따라서 명령 중간에 줄 바꿈을 넣을 수 없습니다. 그러나 줄 끝에 를 `\`쓰면 줄 바꿈을 통해 하나의 명령으로 실행할 수 있습니다.

test.sh

```
#!/bin/bash

echo 'Hello world!' 
pwd                 # 개행으로 단락지기 때문에 위의 echo와는 다른 커멘드로서 실행된다
echo \              # 줄 바꿈을 통해 하나의 명령으로 실행 가능
        'I' \       # 여러 줄에 걸쳐 연결할 수 있습니다.
        'like' \    # 명령 이름과 옵션이 길어졌을 때 사용합시다.
        'shell' \
        'script'
echo                # 인수없이 echo 명령으로 실행됨
'End world!'        # 'End world! '라는 명령을 실행하려고하지만 존재하지 않으므로 오류가 발생합니다.
```

단말기

```
$ ./test.sh
Hello world!                                                  
/Users/user1/work/shellscript
I like shell script

./test.sh: line 11: End world!: command not found        
```

- **`;`로 구분하는 경우**
  한 줄에 여러 명령을 쓸 수도 있습니다. 커멘드끼리를 `;`로 단락하면 별개의 커멘드로서 순차 실행해 줍니다.

test.sh

```
#!/bin/bash

echo 'Hello world!'; pwd; echo 'End world!';
```

단말기

```
$ ./test.sh

Hello world!                                                  
/Users/user1/work/shellscript
End world!
```

# 2. 쉘 스크립트에서 변수를 사용해 보자

## (2-1) 변수에 대입

변수에 값을 대입할 때는 `変数名=値`형식으로 씁니다. 가독성 목적으로 **`=`앞뒤로 공백을 넣지 마십시오** . 언어적으로 오류가 발생합니다.

test.sh

```
#!/bin/bash

var='value'   # = 주위에 공백을 넣지 마십시오.
echo $var     # 아래에서 설명하지만 $는 변수를 참조 할 때 붙는 기호입니다.

var='change'  # 미리 정의된 변수의 값을 변경할 수도 있습니다.
echo $var
```

단말기

```
$ ./test.sh
value
change
```



**변수에 대입시의 `=`전후에 공백을 넣지 말아야 하는 이유의 앞**
`=` 의 캐릭터 라인이 변수가 아니고 커멘드로서 다루어져 버리기 때문입니다.

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">상세한</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="211:1-211:104" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><div class="code-frame" data-lang="bash" data-sourcepos="212:1-217:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="218:1-221:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div><p data-sourcepos="222:1-223:119" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p></div></details>

## (2-2) 변수 참조

변수를 참조할 때 `$変数名`와 같이 변수 이름 앞에 를 `$`붙입니다. 또한, `${変数名}`같이 `{}`둘러싸도 참조할 수 있습니다.

test.sh

```
#!/bin/bash

var1='value' 
echo $var1   # $ 에서 변수 참조

var2=$var1   # 할당 대상 변수에는 $를 붙이지 않습니다.
echo ${var2} # {}을 붙여도 볼 수 있습니다.
```

단말기

```
$ ./test.sh
value
value
change
```



**변수명에 사용할 수 있는 문자**
반각 영숫자와 언더바( `_`)를 사용할 수 있습니다. 그러나 숫자로 시작하는 변수 이름은 사용할 수 없습니다. 또한 영어 대문자와 소문자는 구별됩니다.

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">예</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><div class="code-frame" data-lang="bash" data-sourcepos="251:1-270:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="271:1-278:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div></div></details>

## (2-3) `readonly`에 의한 변수 덮어 쓰기 방지

`readonly`를 붙여 변수를 정의하면 덮어쓸 수 없습니다. **상수를** 정의하는 데 사용하는 것이 좋습니다.

test.sh

```
#!/bin/bash

readonly VAR='hoge'
VAR='fuga'
```

단말기

```
$ ./test.sh
./test.sh: line 4: VAR: readonly variable
```

## (2-4) `unset`에 의한 변수 삭제

`unset`명령을 사용하여 변수를 정의되지 않은 상태로 되돌릴 수 있습니다.

test.sh

```
#!/bin/bash

var='set'
echo $var
unset var # unset 할 때 $를 붙이지 않는다.
echo $var # 정의되지 않았으므로 아무 것도 표시되지 않습니다.
```

단말기

```
$ ./test.sh
set
```

# 3. 쉘 스크립트로 문자열을 다루자

## (3-1) 쉘 스크립트에서 문자열 처리

쉘 스크립트에서는 캐릭터 라인의 전후를 쿼테이션( `''`이나 `""`)로 둘러싸지 않아도 캐릭터 라인으로서 다루어집니다. 그러나 공백이나 탭이 포함된 문자열을 하나의 문자열로 취급하려면 따옴표로 묶어야 합니다.

test.sh

```
#!/bin/bash

var=value       # 따옴표를 추가하지 않아도 문자열을 처리합니다.
echo $var
var='hoge fuga' # 공백이 포함된 경우 따옴표를 추가해야 합니다.
echo $var
var=hoge fuga   # 따옴표를 붙이지 않으면 예기치 않은 오류
echo $var
```

단말기

```
$ ./test.sh
value
hoge fuga
./test.sh: line 7: fuga: command not found
```

## (3-2) 빈 문자와 정의되지 않음

변수에는 빈 문자를 대입할 수도 있습니다. 공문자가 대입된 변수를 참조했을 때와, 정의되지 않은 변수를 참조했을 때는 같은 결과로 보입니다만, 상태로서는 완전히 다른 취급이 됩니다.

test.sh

```
#!/bin/bash

empty=''
echo \$empty: $empty # 아래에 설명된 이스케이프 사용
empty= # 이것은 또한 빈 문자를 의미합니다.
echo \$empty: $empty
echo \$undefined: $undefined
```

단말기

```
$ ./test.sh
$empty:
$empty:
$undefined:
```

## (3-3) 특수 문자와 이스케이프

쉘 스크립트에서 다음 문자는 특수 문자로 처리됩니다.

```
* ? [ ' " ` \ $ ; & ( ) | ~ < > # % = スペース タブ 改行
```

이러한 문자를 단순히 문자열로 사용하고 싶을 때는 `\`앞에 두고 이스케이프하여 사용합시다.

test.sh

```
#!/bin/bash

var=value
echo $var
echo \$var      # $ 이스케이프하여 매개 변수를 확장하지 않습니다.
echo \$var $var # 나란히 출력
echo \\         # \ 자신도 \ 으로 이스케이프 할 수 있습니다.

var=hoge\ fuga  # 공백을 이스케이프하여 연속 문자열로 처리 할 수 ​​없기 때문에 더 이상 사용되지 않습니다.
echo $var
```

단말기

```
$ ./test.sh
value
$var
$var value
\
hoge fuga
```

## (3-4) 문자열을 단일 따옴표로 묶습니다.

쉘 스크립트에서는 문자열을 더블 쿼테이션으로 둘러싼 때와, 싱글 쿼테이션으로 둘러싼 때와, 내부의 캐릭터 라인의 취급에 명확한 차이가 있습니다. 싱글 따옴표로 묶인 문자열은 싱글 따옴표 이외의 특수 문자를 이스케이프 처리합니다. 결과적으로 단일 따옴표 내에서 표현식이 확장되지 않습니다.

test.sh

```
#!/bin/bash

var1=value
var2='${var1}'
echo $var2
```

단말기

```
$ ./test.sh
${var1}
```

## (3-5) 문자열을 더블 따옴표로 묶습니다.

한편, 더블 쿼테이션으로 둘러싼 문자열에서는 `$`, ```, `/`이외의 특수 문자가 이스케이프 됩니다. 이 때문에, 더블 쿼테이션중에서는 이하가 기능합니다.

- `$`에 의한 표현 전개
- \```에 의한 명령 치환 (후술)
- `/`으로 탈출

test.sh

```
#!/bin/bash

var1=value
var2="${var1}"
echo $var2
```

단말기

```
$ ./test.sh
value
```

## (3-6) 문자열 연결

문자열을 연결하려면 연산자는 필요하지 않으며 연결하여 작성하면 연결할 수 있습니다. 문자열 사이에는 공백이 필요하지 않습니다.

test.sh

```
#!/bin/bash

var1='hoge''fuga'
echo '$var1': $var1

var2=hoge
var3=$var1$var2
echo '$var3': $var3

# 다음은 $ var3과 같은 결과입니까?
echo "\$var1hoge": $var1hoge
echo "\$var1'hoge'": $var1'hoge'
echo "\${var1}hoge": ${var1}hoge
echo "\${var1}'hoge'": ${var1}'hoge'
```

단말기

```
$ ./test.sh
(보기 쉽도록 성형)
$var1:         hogefuga
$var3:         hogefugahoge
$var1hoge:                  # var1hoge라는 변수로 처리되며 정의되지 않았으므로 아무 것도 표시되지 않습니다.
$var1'hoge':   hogefugahoge
${var1}hoge:   hogefugahoge 
${var1}'hoge': hogefugahoge
```

# 4. 쉘 스크립트로 인수를 다루자

## (4-1) 쉘 스크립트에 인수를 전달하는 방법

쉘 스크립트 실행 시 인수를 전달하려면 다음과 같이 스크립트 파일 이름 뒤에 여러 문자열을 공백으로 구분하여 열거합니다.

단말기

```
$ ./test.sh arg1 arg2 arg3
```

## (4-2) 위치 파라미터

- 런타임에 전달된 인수는 위치 매개 변수라는 특수 매개 변수로 유지됩니다. 위치 파라미터는 `$1`~ `$9`로 참조할 수 있습니다 ( `${1}`~ `${9}`에서도 가능).
- 10번째 이후의 위치 파라미터는 와 `${10}`같이 `{}`붙여야 합니다.

test.sh

```
#!/bin/bash

echo '$1': $1       # {}없이 OK
echo '${2}': ${2}   # {}이 있더라도 OK
echo '"$3"': "$3"   # 물론 더블 쿼테이션 중에서도 전개된다
echo '${10}': ${10} # 10번째 이후에는 {} 필요
echo '${11}': ${11} # 인수로 지정되지 않은 번호의 위치 매개변수에는 값이 설정되지 않음
echo '$10':$10      # $1 부분이 먼저 확장되어 문자열 연결로 처리됨
```

단말기

```
$ ./test.sh arg1 2 3 4 5 6 7 8 9 10
(보기 쉽도록 성형)
$1:    arg1
${2}:  2
"$3":  3
${10}: 10
${11}: 
$10:   arg10
```

# 5. 특수 파라미터에 대해 알자

위치 파라미터도 특수 파라미터의 일종입니다만, 그 밖에도 다양한 의미의 특수 파라미터가 존재합니다.

## (5-1) `$0`

위치 매개 변수는 `$1`에서 시작되었지만 그럼 `$0`무엇을 나타낼까요?
확인해 봅시다.

test.sh

```
#!/bin/bash

echo $0
echo $1
```

단말기

```
$ ./test.sh arg1
./test.sh
arg1
```

`$0`는 실행된 쉘 스크립트의 이름을 보유하는 특수 매개변수입니다.

## (5-2) `$?`

`$?`는 직전에 실행한 명령의 종료 상태를 유지합니다.



**Linux에서 명령 종료 상태 정보**

- Linux에서 명령의 종료 상태 범위는 부호 없는 8비트 범위에 국한됩니다 `0 ~ 255`.
- 종료 상태 `0`만 정상 종료를 나타내고 다른 값은 비정상 종료를 나타냅니다.



**쉘 스크립트의 종료 상태 정보**

- 쉘 스크립트를 사용 `exit 0`하면 `exit 1`명령과 같이 `exit`종료 상태를 지정할 수 있습니다.
- 쉘 스크립트 내에서 `exit`명령을 생략할 수 있지만, 이 경우 쉘 스크립트 내에서 마지막으로 실행된 명령의 종료 상태는 해당 쉘 스크립트의 종료 상태가 됩니다.

아래 입력된 인수에 따라 종료 상태를 반환하는 쉘 스크립트에서 `$?`값이 어떻게 되는지 확인해 봅시다.

test.sh

```
#!/bin/bash

echo '입력 값' $1 # 첫 번째 인수 출력
exit $1 # exit 명령으로 종료 상태 지정
```

단말기

```
$ ./test.sh 0; echo '종료 상태' $?
'입력값' 0
'종료 상태' 0

$ ./test.sh 1; echo '종료 상태' $?
'입력값' 1
'종료 상태' 1

$ ./test.sh 255; echo 종료 상태' $?
'입력값' 255
'종료 상태' 255

$ ./test.sh 256; echo '종료 상태' $?
'입력값' 256
종료 상태' 0

$ ./test.sh 257; echo '종료 상태' $?
'입력값' 257
'종료 상태' 1

$ ./test.sh -1; echo '종료 상태' $?
'입력값' -1
'종료 상태' 255

$ ./test.sh -2; echo '종료 상태' $?
'입력값' -2
'종료 상태' 254
```

## (5-3) `$#`

`$#`는 스크립트에 주어진 인수의 수를 유지합니다.



**위치 파라미터 `$#`와 `shift`명령**
`shift` 명령을 실행하면 위치 파라미터의 내용이 왼쪽으로 하나 이동합니다 ( `$2`의 값이 `$1`에, `$3`의 값이 `$2`에 ... 등의 상태입니다). 또한 동시에 `$#`값도 1 감소합니다. `shift`를 반복하고 `$#`값이 0이 된 후에 추가를 `shift`실행하면 오류가 발생합니다.

test.sh

```
#!/bin/bash

echo -----------
echo 인수 수 $#
echo '$1' 값 $1
echo '$2' 값 $2
shift
echo $?
echo -----------
echo 인수 수 $#
echo '$1' 값 $1
echo '$2' 값 $2
shift
echo $?
echo -----------
echo 인수 수 $#
echo '$1' 값 $1
echo '$2' 값 $2
shift
echo $?
echo -----------
```

단말기

```
$ ./test.sh arg1 arg2
-----------
인수 수 2
$1 값 arg1
$2 값 arg2
0
-----------
인수 수 1
$1의 값 arg2 # 원래 $1에 있던 값은 사라져 버리므로 주의
$2의 값 # $2의 값이 $1로 이동하고 $2는 정의되지 않은 상태가 됩니다.
0
-----------
인수 수 0
$1 값
$2 값
1 # $# 값이 0이 된 후에 shift했기 때문에 실패
-----------
```

## (5-4) `"$*"`, `"$@"`

```
"$*"`, `"$@"`는 위치 파라미터를 집합적으로 취급하기 위한 특수 파라미터입니다. `"$*"`는 모든 위치 매개변수를 결합하여 하나의 인수로 처리할 때 사용합니다. `"$@"`는 모든 위치 파라미터를 개별적으로 처리할 때 사용합니다. 아직 소개 하지
않은 함수를 사용한 예입니다 .`"$*"``"$@"
```

test.sh

```
#!/bin/bash

function echo_args() {
	echo '인수 수' $#
	echo '첫 번째 인수' $1
	echo '제2 인수' $2
	echo '제3 인수' $3
  	echo --------------------
}

echo ''$@''의 경우
echo_args '$@' # echo_args '$1' '$2' '$3' ...와 동일
echo ''$*''의 경우
echo_args '$*' # echo_args '$1 $2 $3 ...' 와 동일
```

단말기

```
$./test.sh arg1 arg2 arg3
'$@'의 경우
인수 수 3
첫 번째 인수 arg1
두 번째 인수 arg2
세 번째 인수 arg3
--------------------
'$*'의 경우
인수 수 1
첫 번째 인수 arg1 arg2 arg3
두 번째 인수
세 번째 인수

$./test.sh 'arg1 arg2' 'arg3'
'$@'의 경우
인수 수 2
첫 번째 인수 arg1 arg2
두 번째 인수 arg3
세 번째 인수
--------------------
'$*'의 경우
인수 수 1
첫 번째 인수 arg1 arg2 arg3
두 번째 인수
세 번째 인수
--------------------
```



더블 쿼테이션을 붙이지 않는다고는 `$*`상정 `$@`과 다른 움직임을 할 위험이 있으므로, 자세한 거동을 모르는 경우는 사용하지 않는 것이 무난합니다. 사용할 때는 `"$*"`를 `"$@"`사용합시다.

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;">$*</code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">의<span>&nbsp;</span></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;">$@</code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">경우의 결과</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><div class="code-frame" data-lang="bash" data-sourcepos="639:1-654:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="655:1-683:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div></div></details>

## (5-5) `$$`, `$!`

`$$`는 실행된 쉘 스크립트의 프로세스 ID를 보유합니다.
`$!`는 마지막으로 실행한 백그라운드 프로세스의 프로세스 ID를 보유합니다.

test.sh

```
#!/bin/bash

echo $$ #이 스크립트가 실행중인 프로세스 ID를 반환합니다.

(sleep 10; echo 'end') & # & (앰퍼샌드)가 백그라운드에서 실행하고 10 초가 지나기 전에 다음 행으로 이동
echo $! # 위의 명령이 실행중인 백그라운드 프로세스의 프로세스 ID를 반환합니다.
wait $! # 프로세스 종료를 기다립니다. $!는 마지막으로 실행 된 백그라운드 프로세스의 프로세스 ID이므로 값이 변경됩니다.
```

단말기

```
$ ./test.sh
19664
19665
end
```

# 6. 쉘 스크립트로 배열을 만들어 보자

쉘 스크립트에서도 다른 언어처럼 배열을 사용할 수 있습니다.

## (6-1) 배열의 복합 대입

배열에 값을 대입할 때는, 변수에의 대입문의 우변에서 안에 `()`요소를 늘어놓고, `変数名=(要素1 要素2 要素3 ...)`같이 씁니다. 일반 변수에 대입하는 것처럼 `=`앞뒤로 공백을 쓰지 마십시오. 반대로 배열의 요소 사이에는 공백이 필요합니다.

## (6-2) 배열의 요소 참조

배열의 요소를 참조할 때와 `${変数名[インデックス]}`같이 씁니다. 예를 들면 다음과 `${array[1]}`같습니다. 변수의 참조는가 `{}`있거나 없어도 좋았습니다만, 배열의 요소의 참조의 경우는 가 필요합니다 `{}`.

test.sh

```
#!/bin/bash

# 복합 대입
array=(item1 item2 'item3 item4' item5)

# 참조
echo '${array[0]}': ${array[0]}
echo '${array[1]}': ${array[1]}
echo '${array[2]}': ${array[2]}
echo '${array[3]}': ${array[3]}
```

단말기

```
$ ./test.sh
${array[0]}: item1
${array[1]}: item2
${array[2]}: item3 item4
${array[3]}: item5
```

## (6-3) 배열의 요소 수 취득

배열의 요소 수는 `${#変数名[@]}`구문으로 얻을 수 있습니다. 정의되지 않은 요소는 계산되지 않습니다.

test.sh

```
#!/bin/bash

array=(item1 item2 'item3 item4' item5)
echo ${#array[@]}
```

단말기

```
$ ./test.sh
4
```

## (6-4) 배열에의 인덱스를 이용한 대입

쉘 스크립트에서는 배열의 요소는 연속하고 있을 필요는 없고, 도중에 비어 있는 배열도 작성할 수 있습니다. 중간에 비어 있는 배열을 작성하는 경우는, 복합 대입시에 요소의 부분으로라고 씁니다 `[インデック]=値`. 또한 기존 배열의 요소를 변경하려면 라고 `変数名[インデックス]=値`씁니다. 미정도리의 배열에 대해서를 `変数名[インデックス]=値`사용하면, 복합 대입을 하지 않아도 빈 상태(empty)가 있는 배열을 작성할 수 있습니다.

test.sh

```
#!/bin/bash

# 복합 대입시에 인덱스를 지정해 값을 넣는 것으로, 사용 가능한 배열을 작성 가능
array=(item0 [2]=item2 [4]=item4)
echo ${#array[@]} # 3개만 값이 포함되어 있으므로 요소 수는 3입니다.
echo ${array[0]}
echo ${array[1]}
echo ${array[2]}
echo ${array[3]}
echo ${array[4]}
echo -----------------

# 기존 배열의 요소 재작성
array[1]=item1 # 정의되지 않은 인덱스에 값 할당
array[2]= # 기존 인덱스를 빈 문자로 설정
echo ${#array[@]} # [1] 에 값이 포함되었으므로 요소 수는 4입니다.
echo ${array[0]}
echo ${array[1]}
echo ${array[2]}
echo ${array[3]}
echo ${array[4]}
echo -----------------

# 미정의 배열에 갑자기 인덱스 지정으로 요소를 대입할 수 있다
new_array[3]=item3
echo ${#new_array[@]}    
echo ${new_array[0]}
echo ${new_array[1]}
echo ${new_array[2]}
echo ${new_array[3]}
echo ${new_array[4]}
echo -----------------
```

단말기

```
$ ./test.sh
3
item0

item2

item4
-----------------
4
item0
item1


item4
-----------------
1



item3

-----------------
```

## (6-5) 배열의 모든 요소 참조

인수와 마찬가지로 `@`모든 `*`요소를 참조 할 수 있지만 예상대로 동작을 보장하기 위해 더블 따옴표로 묶은 것을 사용하는 것이 `"${変数名[@]}"`좋습니다 `"${変数名[*]}"`.

test.sh

```
#!/bin/bash

array=(item1 item2 'item3 item4' item5)

function echo_array_items() {
  echo $1
  echo $2
  echo $3
  echo $4
  echo $5
  echo -----------------------
}

echo Use '"${array[@]}"'
echo_array_items "${array[@]}" # echo_array_items "${array[0]}" "${array[1]}" ... 와 동일

echo Use '"${array[*]}"'
echo_array_items "${array[*]}" # echo_array_items "${array[0]} ${array[1]} ..." 와 동일

echo Use '${array[@]}'
echo_array_items ${array[@]}

echo Use '${array[*]}'
echo_array_items ${array[*]}
```

단말기

```
$ ./test.sh
Use "${array[@]}"
item1
item2
item3 item4
item5

-----------------------
Use "${array[*]}"
item1 item2 item3 item4 item5




-----------------------
Use ${array[@]}
item1
item2
item3
item4
item5
-----------------------
Use ${array[*]}
item1
item2
item3
item4
item5
-----------------------
```

## (6-6) 배열에 요소 추가

`"${変数名[@]}"`와 결합하여 배열에 요소를 추가할 수 있습니다.

test.sh

```
#!/bin/bash
array=(item1 item2 item3)
echo "${array[@]}"

# 맨 위에 추가
array2=(item_a item_b "${array[@]}")
echo "${array2[@]}"

# 끝에 추가
array3=("${array[@]}" item_c item_d)
echo "${array3[@]}"

# 자신의 끝에 추가
array+=(item_e item_f) # array=("${array[@]}" item_e item_f) 와 동일
echo "${array[@]}"
```

단말기

```
$ ./test.sh
item1 item2 item3
item_a item_b item1 item2 item3
item1 item2 item3 item_c item_d
item1 item2 item3 item_e item_f
```

## (6-7) 값이 존재하는 인덱스의 취득

`${!変数名[@]}`에서 배열에서 값이 존재하는 인덱스를 얻을 수 있습니다.

test.sh

```
#!/bin/bash

array=(item0 [2]=item2 [4]=item4)
echo ${!array[@]}
```

단말기

```
$ ./test.sh
0 2 4
```



**쉘 스크립트에서의 연상 배열에 대해**
쉘 스크립트에서도 다른 언어로 말하는 해시나 맵과 같은 기능인 연상 배열을 사용할 수 있습니다. 그러나 `bash`버전이 4 미만인 경우 연관 배열을 사용할 수 없습니다.

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">상세한</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="912:1-912:93" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><ul data-sourcepos="913:1-922:146" style="padding: 0px 0px 0px 1.5em; margin: 16px 0px; box-sizing: inherit; list-style: disc;"><li data-sourcepos="913:1-914:413" style="padding: 0px; margin: 0px; box-sizing: inherit;"><strong style="padding: 0px; margin: 0px; box-sizing: inherit; font-weight: bold;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></strong><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li><li data-sourcepos="915:1-916:107" style="padding: 0px; margin: 0px; box-sizing: inherit;"><strong style="padding: 0px; margin: 0px; box-sizing: inherit; font-weight: bold;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></strong><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li><li data-sourcepos="917:1-918:61" style="padding: 0px; margin: 0px; box-sizing: inherit;"><strong style="padding: 0px; margin: 0px; box-sizing: inherit; font-weight: bold;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></strong><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li><li data-sourcepos="919:1-920:152" style="padding: 0px; margin: 0px; box-sizing: inherit;"><strong style="padding: 0px; margin: 0px; box-sizing: inherit; font-weight: bold;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></strong><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li><li data-sourcepos="921:1-922:146" style="padding: 0px; margin: 0px; box-sizing: inherit;"><strong style="padding: 0px; margin: 0px; box-sizing: inherit; font-weight: bold;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></strong><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li></ul><div class="code-frame" data-lang="bash" data-sourcepos="923:1-939:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="940:1-946:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div></div></details>

# 7. 쉘 스크립트에서 조건 분기를 해보자

## (7-1) `if`에 의한 조건 분기 작성 방법

if 문의 가장 간단한 작성 방법은 다음과 같습니다. if 의 역을 취한 문자이므로 `fi`if 문이 끝나는 위치를 명시할 필요가 있습니다. 평소 많이 사용하지 않는 문자열이므로 실수하지 않도록 조심합시다.

```
if 조건; then
	조건이 참인 경우 처리
fi
```

다음도 가능합니다.

- 조건이 참일 때 다중 처리
- `elif`절로 조건 및 처리 추가
- `else`절에 의해 조건이 모두 거짓일 때의 처리를 추가
- if 문 자체를 중첩

```
if 조건1; then
    조건 1이 참이면 처리 1
    조건 1이 참이면 처리 2
elif 조건2; then
	조건 2가 참인 경우의 처리
elif 조건3; then
	조건 3이 참인 경우의 처리
if 조건4; then
	조건 3, 4가 참인 경우의 처리
fi
else
	상기 모든 조건이 거짓인 경우의 처리
fi
```



**`if`에 의한 조건 분기의 기입의 상세는**
`if 条件` 커멘드로서 다루어지므로, `if 条件`뒤에는 커멘드의 끝을 나타내는 기호가 필요하게 됩니다. [(1-6)](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#(1-6)-シェルスクリプトで複数のコマンドを実行してみよう) 에서 설명한 것처럼 명령은 `;`또는 줄 바꿈으로 구분할 수 있습니다. 위의 예와 같이 를 `;`붙여 같은 `then`줄에을 계속해서 쓸 수도 있고, 다음과 같이 개행으로 단락지어를 다른 행으로 나눌 수도 있습니다 `then`.

```
if 조건
then
	조건이 참인 경우 처리
fi
```

다만, `;`를 붙여 같은 줄에을 `then`계속해 쓰는 쓰는 편이 일반적이므로, 그쪽의 쓰는 법으로 쓰는 것을 추천합니다.

## (7-2) if 문 조건에 명령 사용

일반적인 프로그래밍 언어에서는 if 문의 조건으로서 진위치를 돌려주는 식을 쓰지만, 쉘 스크립트에서는 if 문의 조건으로서 명령을 쓰고, 그 명령의 종료 스테이터스에 의해 조건 분기를 제어합니다. 종료 스테이터스가 0 이면 참, 0 이외이면 거짓으로 판정합니다. 이것은 [(5-2)](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#(5-2)-`$?`) 에서 설명한 것처럼 Linux의 명령은 종료 상태로서 성공의 경우는 0을, 실패의 경우는 0 이외를 돌려주도록 되어 있기 때문입니다.

test.sh

```
#!/bin/bash

if grep -n test test.txt; then
  echo $?
  echo success
else
  echo $?
  echo fail
fi
```

단말기

```
# test.txt에 test라는 문자열이 포함되어 있으면
$./test.sh
1:test is writen # grep 의 출력
0	 	# grep 명령의 종료 상태
성공

# test.txt에 test라는 문자열이 포함되어 있지 않은 경우
$./test.sh
1 		# grep은 대상 파일에 검색 문자열이 없으면 종료 상태로 실패합니다.
fail
```

## (7-3) `[`명령으로 if 문 조건을 작성합시다.

if 문의 조건으로 `[`명령이 자주 사용됩니다. `[`는 단순한 기호가 아니라 명령으로 작동하며 별칭 `test`명령과 동일한 동작을 수행합니다. `[`이나 `test`명령은 인수에 연산자를 건네주면(자), 캐릭터 라인이나 수치의 비교를 하거나, 파일의 존재를 판정해 주기도 합니다. 그리고 판정의 결과가 참이면 0, 거짓이면 1을 종료 스테이터스로서 돌려줍니다. 외형의 알기 쉬움으로부터, `test`커멘드보다 `[`커멘드의 쪽이 자주 사용됩니다.

test.sh

```
#!/bin/bash

test '$1' = 'test'
echo 'test 명령의 종료 상태': $?

[ '$1' = 'test' ]
echo '[명령 종료 상태':$?

if [ "$1" = "test" ]; then
  echo success
else
  echo fail
fi
```

단말기

```
$./test.sh test
test 명령의 종료 상태: 0
[명령 종료 상태: 0
성공

$./test.sh xxx
test 명령의 종료 상태: 1
명령 종료 상태: 1
fail
```



**`[`명령을 작성하는 방법에 대한 참고 사항**

- `[`를 커맨드로서 인식시키기 위해서, if 와의 사이, 제1 인수와의 사이에 각각 공백을 비운다.
- 연산자와 다른 인수 사이에도 공백을 둡니다.
- 마지막 인수로 `]`전달합니다.
- `]`를 단독의 인수로 인식시키기 위해서, `]`앞에도 공간을 비운다.

## (7-4) `[`명령 연산자 소개

`[`, `test`명령에는 조건 판정을 위해 다양한 연산자가 준비되어 있습니다. 아래에서 사용 용도로 나누어 소개합니다.

### 문자열 비교

| 연산자              | 판정 결과가 참이 되는 조건                                 | 빈도 |
| :------------------ | :--------------------------------------------------------- | :--- |
| *str* (연산자 없음) | *str* 이 빈 문자열이거나 정의되지 않음                     | ★☆☆  |
| - *str 에서*        | *str* 이 빈 문자열이 아닙니다 (정의되지 않은 경우에도 참). | ★★★  |
| - *p 와 함께*       | *str* 이 빈 문자열입니다.                                  | ★★★  |
| *str1* = *str2*     | *str1* 과 *str2* 가 같음                                   | ★★★  |
| *str1* == *str2*    | *str1* 과 *str2* 가 같음( `=`같음)                         | ★☆☆  |
| *str1* != *str2*    | *str1* 과 *str2* 가 같지 않음                              | ★★★  |
| *str1* < *str2*     | *str1* 이 *str2* 보다 사전순으로 앞에 있음                 | ★★☆  |
| *str1* > *str2*     | *str1* 이 *str2* 보다 사전 순서로 뒤에 있음                | ★★☆  |





`<`, `>`는 bash 에 있어서 다른 의미 (리디렉트)의 기호이므로, `[`커멘드에 인수로서 건네줄 때는 캐릭터 라인으로서 건네주기 위해서 `'<'`, `">"`와 `\>`같이 쿼팅 (이스케이프) 할 필요가 있습니다.

### 정수 비교

| 연산자              | 의미             | 판정 결과가 참이 되는 조건         | 빈도 |
| :------------------ | :--------------- | :--------------------------------- | :--- |
| *int1* -eq *int2*   | 동일한           | *int1* 과 *int2* 가 같음           | ★★★  |
| *int1* -ne *int2*   | 같지 않다        | *int1* 과 *int2* 가 같지 않습니다. | ★★★  |
| *int1* -lt *int2*   | 미만             | *int1* 이 *int2* 보다 작음         | ★★★  |
| *int1* -le *int2*   | 작거나 같음      | *int1* 이 *int2* 이하              | ★★★  |
| *int1* -gt *int2*   | ~보다 큰         | *int1* 이 *int2* 보다 크다.        | ★★★  |
| *int1* *-int2* 제공 | 보다 크거나 같음 | *int1* 이 *int2* 이상              | ★★★  |



### 파일에 대한 평가

파일에 대한 평가에는 많은 연산자가 준비되어 있습니다만, 여기에서는 자주 사용되는 연산자에 좁혀 소개합니다.

| 연산자    | 판정 결과가 참이 되는 조건                     | 빈도 |
| :-------- | :--------------------------------------------- | :--- |
| -d *파일* | *파일* 이 존재하고 디렉토리입니다.             | ★★★  |
| -e *파일* | *파일이* 존재합니다 ( `-a`와 동일).            | ★★★  |
| -f *파일* | *파일* 이 존재하며 일반 파일입니다.            | ★★★  |
| -r *파일* | *파일* 이 존재하고 읽기 권한이 부여되었습니다. | ★★☆  |
| -w *파일* | *파일* 이 존재하고 쓰기 권한이 부여되었습니다. | ★★☆  |
| -x *파일* | *파일* 이 존재하고 실행 권한이 부여되었습니다. | ★★☆  |





<details style="padding: 0px; margin: 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><b style="padding: 0px; margin: 0px; box-sizing: inherit; font-weight: bolder;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">기타 파일에 대한 평가를 위한 연산자</font></font></b></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><table data-sourcepos="1101:1-1118:112" style="padding: 0px; margin: 16px 0px; box-sizing: inherit; border-collapse: collapse; border-spacing: 0px; display: inline-block; max-width: 100%; overflow: auto;"><thead style="padding: 0px; margin: 0px; box-sizing: inherit; border-left: 1px solid var(--color-divider);"><tr data-sourcepos="1101:1-1101:49" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><th data-sourcepos="1101:2-1101:12" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; font-weight: bold; background-color: var(--color-surface); border-top: 1px solid var(--color-divider); border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider);"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></th><th data-sourcepos="1101:14-1101:48" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; font-weight: bold; background-color: var(--color-surface); border-top: 1px solid var(--color-divider); border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider);"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></th></tr></thead><tbody style="padding: 0px; margin: 0px; box-sizing: inherit; border-left: 1px solid var(--color-divider);"><tr data-sourcepos="1103:1-1103:89" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1103:2-1103:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1103:12-1103:88" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><sup style="padding: 0px; margin: 0px; box-sizing: inherit; font-size: 12.75px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;"><a href="https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiita%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9&amp;utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&amp;utm_medium=email&amp;utm_term=0_e44feaa081-39fa3199c8-34467781#fn-special_file" id="fnref-special_file" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: rgba(0, 0, 0, 0); color: var(--color-green-90); text-decoration: none; word-break: break-all;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></a></sup><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1104:1-1104:93" style="padding: 0px; margin: 0px; box-sizing: inherit;"><td data-sourcepos="1104:2-1104:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1104:12-1104:93" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><sup style="padding: 0px; margin: 0px; box-sizing: inherit; font-size: 12.75px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;"><a href="https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiita%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9&amp;utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&amp;utm_medium=email&amp;utm_term=0_e44feaa081-39fa3199c8-34467781#fn-special_file" id="fnref-special_file-2" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: rgba(0, 0, 0, 0); color: var(--color-green-90); text-decoration: none; word-break: break-all;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></a></sup><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></td></tr><tr data-sourcepos="1105:1-1105:94" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1105:2-1105:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1105:12-1105:94" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><sup style="padding: 0px; margin: 0px; box-sizing: inherit; font-size: 12.75px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;"><a href="https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiita%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9&amp;utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&amp;utm_medium=email&amp;utm_term=0_e44feaa081-39fa3199c8-34467781#fn-sgid" id="fnref-sgid" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: rgba(0, 0, 0, 0); color: var(--color-green-90); text-decoration: none; word-break: break-all;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></a></sup><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1106:1-1106:102" style="padding: 0px; margin: 0px; box-sizing: inherit;"><td data-sourcepos="1106:2-1106:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1106:12-1106:102" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><sup style="padding: 0px; margin: 0px; box-sizing: inherit; font-size: 12.75px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;"><a href="https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiita%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9&amp;utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&amp;utm_medium=email&amp;utm_term=0_e44feaa081-39fa3199c8-34467781#fn-symbolic_link" id="fnref-symbolic_link" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: rgba(0, 0, 0, 0); color: var(--color-green-90); text-decoration: none; word-break: break-all;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></a></sup><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1107:1-1107:97" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1107:2-1107:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1107:12-1107:97" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><sup style="padding: 0px; margin: 0px; box-sizing: inherit; font-size: 12.75px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;"><a href="https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiita%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9&amp;utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&amp;utm_medium=email&amp;utm_term=0_e44feaa081-39fa3199c8-34467781#fn-sticky_bit" id="fnref-sticky_bit" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: rgba(0, 0, 0, 0); color: var(--color-green-90); text-decoration: none; word-break: break-all;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></a></sup><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1108:1-1108:63" style="padding: 0px; margin: 0px; box-sizing: inherit;"><td data-sourcepos="1108:2-1108:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1108:12-1108:63" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1109:1-1109:75" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1109:2-1109:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1109:12-1109:75" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1110:1-1110:94" style="padding: 0px; margin: 0px; box-sizing: inherit;"><td data-sourcepos="1110:2-1110:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1110:12-1110:94" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><sup style="padding: 0px; margin: 0px; box-sizing: inherit; font-size: 12.75px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;"><a href="https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiita%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9&amp;utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&amp;utm_medium=email&amp;utm_term=0_e44feaa081-39fa3199c8-34467781#fn-sgid" id="fnref-sgid-2" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: rgba(0, 0, 0, 0); color: var(--color-green-90); text-decoration: none; word-break: break-all;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></a></sup><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1111:1-1111:114" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1111:2-1111:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1111:12-1111:114" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1112:1-1112:101" style="padding: 0px; margin: 0px; box-sizing: inherit;"><td data-sourcepos="1112:2-1112:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1112:12-1112:101" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><sup style="padding: 0px; margin: 0px; box-sizing: inherit; font-size: 12.75px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;"><a href="https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiita%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%B9&amp;utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&amp;utm_medium=email&amp;utm_term=0_e44feaa081-39fa3199c8-34467781#fn-symbolic_link" id="fnref-symbolic_link-2" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: rgba(0, 0, 0, 0); color: var(--color-green-90); text-decoration: none; word-break: break-all;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></a></sup><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1113:1-1113:96" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1113:2-1113:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1113:12-1113:96" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1114:1-1114:54" style="padding: 0px; margin: 0px; box-sizing: inherit;"><td data-sourcepos="1114:2-1114:10" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1114:12-1114:54" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1115:1-1115:89" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1115:2-1115:20" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></em></td><td data-sourcepos="1115:22-1115:89" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1116:1-1116:71" style="padding: 0px; margin: 0px; box-sizing: inherit;"><td data-sourcepos="1116:2-1116:20" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1116:22-1116:71" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1117:1-1117:68" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1117:2-1117:20" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1117:22-1117:68" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr><tr data-sourcepos="1118:1-1118:112" style="padding: 0px; margin: 0px; box-sizing: inherit;"><td data-sourcepos="1118:2-1118:21" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><em style="padding: 0px; margin: 0px; box-sizing: inherit; font-style: italic;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></em></td><td data-sourcepos="1118:23-1118:112" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td></tr></tbody></table></div></details>

### 연산자 조인

이상의 연산자는 다음의 연산자에 의해 조건을 조합하는 것이 가능합니다.

| 연산자                 | 의미                                                         |
| :--------------------- | :----------------------------------------------------------- |
| *표현식1* -a *표현식2* | *expression1* 과 *expression2* 조건이 모두 참이면 참 (AND)   |
| *표현식1* -o *표현식2* | *expression1* 또는 *expression2* 조건 중 하나가 참이면 참 (OR) |
| ( *표현* )             | 조건식을 그룹화할 때 사용                                    |





`()`는 bash 에 있어서 다른 의미의 기호이므로, `[`커멘드에 인수로서 건네줄 때는, 캐릭터 라인으로서 건네주기 위해(듯이)와 같이 `[ \( "$str" = "test" \) ]`쿼팅 (이스케이프) 할 필요가 있습니다.

연산자의 조인은 다음과 같이 작성합니다.

test.sh

```
#!/bin/bash

if [ \( "$1" = "a"  -o "$2" = "b" \) -a -f test.txt ]; then
  echo '첫 번째 인수가 a 또는 두 번째 인수가 b이고 test.txt가 있습니다! '
fi
```

단말기

```
$ touch test.txt
$ ./test.sh a c
첫 번째 인수가 a 또는 두 번째 인수가 b이고 test.txt가 있습니다!
```

## (7-5) 보다 안전한 것을 `[[ ]]`사용해 조건 분기해 보자

`[`, `test`명령과 유사한 구문이 `[[ ]]`있습니다. `[[ ]]`안에서는 기본적으로는 `[ ]`같은 연산자를 사용할 수 있지만 다음과 같이 몇 가지 차이점이 있습니다. `[[ ]]`쪽이 쉘 스크립트 특유의 제한이 적고, 심블에 기술할 수 있어 편리하기 때문에, 이쪽을 사용하는 것을 추천합니다.

**`&&`, `||`로 조건식을 보다 간단하게 쓸 수 있는**
`[[ ]]` 안에서는 AND 연산자, OR 연산자로서 `-a`, `-o`대신 `&&`, `||`를 사용할 수 있습니다.

test.sh

```
#!/bin/bash

if [[ ( "$1" = "a"  || "$2" = "b" ) && -f test.txt ]]; then
  echo '첫 번째 인수가 a 또는 두 번째 인수가 b이고 test.txt가 있습니다! '
fi
```

단말기

```
$ tuoch test.txt
$ ./test.sh a c
첫 번째 인수가 a 또는 두 번째 인수가 b이고 test.txt가 있습니다!
```



**`&&``||`원래 ,** 여러 명령을 AND 연산, OR 연산으로 연결하기위한 연산자이지만 전용 메커니즘으로
이러한 `&&`기호 를 특별히 다루고 있습니다.`||``[[ ]]`

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">상세한</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><ul data-sourcepos="1173:1-1174:370" style="padding: 0px 0px 0px 1.5em; margin: 16px 0px; box-sizing: inherit; list-style: disc;"><li data-sourcepos="1173:1-1174:370" style="padding: 0px; margin: 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li></ul><div class="code-frame" data-lang="shell-session" data-sourcepos="1175:1-1177:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span></code></pre></div></div><ul data-sourcepos="1178:1-1179:406" style="padding: 0px 0px 0px 1.5em; margin: 16px 0px; box-sizing: inherit; list-style: disc;"><li data-sourcepos="1178:1-1179:406" style="padding: 0px; margin: 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li></ul><div class="code-frame" data-lang="shell-session" data-sourcepos="1180:1-1182:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span></code></pre></div></div></div></details>

**단어 분할되지 않음**



<details style="padding: 0px; margin: 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;">[</code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">명령에서 단어 분할</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="1194:1-1195:192" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><div class="code-frame" data-lang="bash" data-sourcepos="1197:1-1206:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="1207:1-1215:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div><p data-sourcepos="1217:1-1217:316" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><div class="code-frame" data-lang="bash" data-sourcepos="1218:1-1227:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="1228:1-1234:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div></div></details>

`[[ ]]`내부에서는 변수를 `""`인용하는지 여부에 관계없이 변수의 값을 하나의 문자열로 간주합니다. 따라서 인용되지 않은 변수의 값에 공백이 있거나 공백이 되어도 오류가 발생하지 않습니다.

test.sh

```
#!/bin/bash

var=$1
if [[ $var = 'hoge fuga' ]]; then # [[]] 사용
  echo success
else
  echo fail
fi
```

단말기

```
$ ./test.sh 'hoge fuga'
success

$ ./test.sh
fail
```

**패턴 매치가 가능**

`[[ ]]`내에서 `=`, `==`, `!=`의 오른쪽을 `*`사용하면 패턴 문자열로 간주됩니다.

test.sh

```
#!/bin/bash

var=hoge-fuga
if [[ $var == hoge-* ]]; then # hoge- 뒤에 임의의 문자열이라는 패턴과 일치하면 참
  echo success
else
  echo fail
fi
```

단말기

```
$ ./test.sh
success
```



<details style="padding: 0px; margin: 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;">*</code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">에 의한 패턴 매치에 대해 자세히 알아보기</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="1279:1-1279:149" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><div class="code-frame" data-lang="bash" data-sourcepos="1280:1-1289:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="1290:1-1293:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div><p data-sourcepos="1294:1-1294:114" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><div class="code-frame" data-lang="bash" data-sourcepos="1295:1-1305:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="1306:1-1309:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div></div></details>

## (7-7) `case`에 의한 조건 분기 작성 방법

`case`는 하나의 캐릭터 라인에 대해 복수의 패턴을 위에서 차례로 대조해 나가, 최초로 매치한 패턴에 응해 처리를 실행하기 위한 구문입니다. if 문과 마찬가지로 case 의 반대를 취했다는 `esac`문자열로 case 문의 끝을 명시할 필요가 있습니다. 또한 각 패턴에 대한 처리 후에 `;;`붙이는 것을 잊기 쉽기 때문에 주의합시다.

```
case 문자열 in
    패턴 1)
    처리 1
    ;;
    패턴 2)
    처리 2
    ;;
    *)
    처리 3
    ;;
esac
```

case 문에는 다음과 같은 특징이 있습니다.

- 패턴에 와일드카드( `*`)를 사용할 수 있음
- 마지막으로 `*)`하는 패턴을 쓰는 것으로, 그것보다 전에 쓴 모든 패턴에 매치하지 않았을 때의 처리를 쓸 수 있다
- `|`를 사용하면 여러 패턴에 대해 동일한 처리를 수행 할 수 있습니다.

test.sh

```
#!/bin/bash

file="$1"

case "$file" in
  *.csv)
    echo this is csv
    ;;
  special-* | important-*)
    echo this is special file
    ;;
  *)
    echo "Invalid file: $file"
    ;;
esac
```

단말기

```
$ ./test.sh abc.csv
this is csv

$ ./test.sh importand-paper.pdf
this is special file

$ ./test.sh other.txt
Invalid fiel: other.txt
```

# 8. 쉘 스크립트에서 루프 처리를 작성해 보자.

## (8-1) `for`에 의한 루프 처리의 작성 방법

`for`를 사용하여 단어 목록에 대해 루프 처리를 수행할 수 있습니다.

```
for 변수 in 단어 목록; do
	반복하는 처리
done
```

단어 리스트에 [(5-4)](https://qiita.com/osw_nuco/items/(5-4)-`"$*"`,-`"$@"`) 에서 해설한 것을 `"$@"`이용하는 것으로, 쉘 스크립트에 건네진 모든 인수에 대해서 반복 처리를 실시할 수 있습니다.

test.sh

```
#!/bin/bash

for arg in '$@'; do # for 다음에 오는 변수 이름에 $를 붙이지 마십시오.
	echo $arg # 참조할 때 $ 를 붙인다
done
```

단말기

```
$ ./test.sh 'aaa bbb' ccc ddd
aaa bbb
ccc
ddd
```

또, [(6-5)](https://qiita.com/osw_nuco/items/(6-5)-配列の全ての要素の参照) 로 해설한 것을　`"${array[@]}"`이용하는 것으로, 배열의 모든 요소에 대해서 반복 처리를 실시할 수 있습니다.

test.sh

```
#!/bin/bash

array=(aaa 'bbb ccc' ddd)
for element in "${array[@]}"; do
    echo $element
done
```

단말기

```
$ ./test.sh
aaa
bbb ccc
ddd
```

## (8-2) `while`에 `until`의한 루프 처리 작성

`while`를 사용하면 지정한 조건이 참인 한 처리를 반복할 수 있습니다.

```
while 조건; do
	반복하는 처리
done
```

조건부에는 if 문과 마찬가지로 `[`명령과 `[[ ]]`구문도 사용할 수 있습니다. 조건부 명령을 실행한 결과 종료 상태가 0이면 참으로 간주되고 처리가 계속됩니다. 조건부의 종료 상태가 0이 아니면 거짓으로 간주되고 그 시점에서 루프 처리가 중지됩니다.

test.sh

```
#!/bin/bash

while [[ $# -gt 0 ]]; do
  echo $1
  shift
done
```

단말기

```
$ ./test.sh aaa bbb ccc
aaa
bbb
ccc
```

`until`반대로`while` 지정한 조건이 거짓이면 처리를 반복합니다.

test.sh

```
#!/bin/bash

until [[ $# -eq 0 ]]; do
  echo $1
  shift
done
```

단말기

```
$ ./test.sh aaa bbb ccc
aaa
bbb
ccc
```

# 9. 함수를 사용해 처리를 정리해 보자

## (9-1) 함수 정의

쉘 스크립트가 복잡해지면, 어느 정도의 정리로 처리를 나누는 것으로 전망을 잘 하는 것을 생각해 봅시다. 그 때 사용할 수 있는 것이 함수입니다. 함수는 다음과 같이 정의합니다.

```
function 함수 이름()
{
	처리
}
```

1행의 `function 関数名()`부분은 ()를 빼고 `function 関数名`라고 쓸 수도 있습니다. 또한 함수를 뽑아도 `関数名()`함수를 정의할 수 있습니다. 그러나 함수의 정의와 알기 쉽게 위에서 소개한 것을 `function 関数名()`사용하는 것을 추천합니다.

## (9-2) 함수 내에서만 유효한 로컬 변수 정의

bash 변수는 달리 지정하지 않는 한 쉘 스크립트 전체에서 유효한 전역 변수입니다. 이것은 변수를 함수 내에서 정의한 경우에도 마찬가지입니다. 일반적으로 전역 변수는 범위가 너무 커서 의도하지 않은 동작을 일으키기 쉽기 때문에 함수 내에서 로컬 변수를 사용하는 것이 좋습니다. bash에서 로컬 변수를 정의하려면 변수 이름 앞에 붙입니다 `local`.

```
function test_func() {
  local var1
  var1=aaa

  local var2=bbb # 정의와 동시에 대입하는 것도 가능
}
```



**지역 변수의 특징**

- 함수외에서 같은 변수명의 글로벌 변수가 정의되어 있어도, 함수내에서는 로컬 변수의 쪽의 값이 유효. 로컬 변수의 값을 변경해도, 함수외의 동명의 글로벌 변수의 값은 변하지 않는다.
- 함수로부터 함수를 호출했을 경우는, 호출원 함수의 로컬 변수는 호출처 함수에서도 유효. 다만, 호출처 함수로 호출원 함수와 같은 이름의 로컬 변수를 사용하고 있는 경우는 그쪽이 우선된다.

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">동작 예</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><div class="code-frame" data-lang="bash" data-sourcepos="1465:1-1499:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="1500:1-1512:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span></code></pre></div></div></div></details>

## (9-3) 함수로 인수 처리

명령이나 쉘 스크립트와 마찬가지로 함수도 인수를 전달할 수 있습니다. 인수로 전달한 값을 함수 내에서 참조하려면 쉘 스크립트와 마찬가지로 위치 매개 변수를 사용합니다. 또한 위치 매개변수 외에도 `$#`사용할`"$@"` 수 있습니다.

test.sh

```
#!/bin/bash

function echo_self_args()
{
  echo $1
  echo "$2"
  echo ${3}
  echo "${4}"
  echo $#
  echo "$@"
}

echo_self_args arg1 arg2 'arg3 arg4' arg5
```

단말기

```
$ ./test.sh
arg1
arg2
arg3 arg4
arg5
4
arg1 arg2 arg3 arg4 arg5
```

## (9-4) 함수 이름 얻기

[(5-1)](https://qiita.com/osw_nuco/items/(5-1)-`$0`) 에서 설명한대로 실행중인 쉘 스크립트의 이름은 `$0`특수 매개 변수로 얻을 수 있었지만 함수 내에서 여부에 관계없이 항상 실행중인 쉘 스크립트의 이름으로 확장 됩니다. 그렇다면 실행중인 함수의 이름을 어떻게 얻을 수 있습니까?

실행중인 함수의 이름은 `FUNCNAME`변수로 얻을 수 있습니다. `FUNCNAME`는 함수가 불려 갈 때마다 선두에 그 함수명을 추가해 가는 배열입니다. 따라서 `${FUNCNAME[0]}`항상 실행중인 함수의 이름입니다.
로그 등으로 어느 함수로 처리를 실행했는지를 표시해 두고 싶은 경우에 편리합니다.

test.sh

```
#!/bin/bash

function echo_value1() 
{
  local var1=local1
  echo ${FUNCNAME[0]} ':$var1:1:' $var1

  echo ${FUNCNAME[0]} ':$var2:1:' $var1

}

function echo_value2() 
{
  local var1=local2
  echo ${FUNCNAME[0]} ':$var1:1:' $var1
  
  local var2=local2
  echo ${FUNCNAME[0]} ':$var2:1:' $var1

  echo_value1

  echo ${FUNCNAME[0]} ':$var1:2:' $var1
  echo ${FUNCNAME[0]} ':$var2:2:' $var1
}

var1=global
echo 'global :$var1:1:' $var1
echo 'global :$var2:1:' $var2

echo_value2

echo 'global :$var1:2:' $var1
echo 'global :$var2:2:' $var2
```

단말기

```
$ ./test.sh
global :$var1:1: global
global :$var2:1:
echo_value2 :$var1:1: local2
echo_value2 :$var2:1: local2
echo_value1 :$var1:1: local1
echo_value1 :$var2:1: local2
echo_value2 :$var1:2: local2
echo_value2 :$var2:2: local2
global :$var1:2: global
global :$var2:2:
```

## (9-5) 함수 종료 상태

[(5-2)](https://qiita.com/osw_nuco/items/(5-2)-`$?`) 에서 설명한 것처럼 쉘 스크립트의 종료 상태는 명령으로 `exit`지정할 수 있었지만 함수의 종료 상태는 어떻게 지정해야합니까?

함수의 종료 상태를 명시적으로 지정하려면 `return`명령을 사용합니다. `return`의 인수를 생략하면 `return`직전에 실행한 함수의 종료 상태를 반환합니다. 또한 `return`자체를 생략하면 함수 내에서 마지막으로 실행한 명령의 종료 상태가 함수의 종료 상태가 됩니다.

test.sh

```
#!/bin/bash

function return_test()
{
  if [[ -z $1 ]]; then
    echo 'arg1 is empty.'
    return 1
  fi

  echo $1
}

return_test test
echo '종료 상태': $?
echo ---
return_test
echo '종료 상태': $?
```

단말기

```
$./test.sh
test
종료 상태: 0
---
arg1 is empty.
종료 상태: 1
```

# 10. 리디렉션 히어 문서 파이프를 잘 사용하자



**표준 입출력 정보**
Linux에서는 일반적으로 표준 입출력이 다음에 할당됩니다.

| 이름                   | 할당 대상   |
| :--------------------- | :---------- |
| 표준 입력(stdin)       | 키보드      |
| 표준 출력(stdout)      | 터미널 화면 |
| 표준 오류 출력 (sterr) | 터미널 화면 |

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">상세한</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="1644:1-1645:371" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><br style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><p data-sourcepos="1647:1-1647:363" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p></div></details>

## (10-1) 출력 리디렉션 기능을 사용해 봅시다.

커멘드 실행시에 표준 입출력의 입력원, 출력처를 옮겨놓는 쉘의 기능을 리디렉트라고 합니다. 표준 출력의 출력처를 터미널 화면에서 바꾸려면 `>`기호를 사용합니다.

아래의 예에서는, 본래 터미널 화면에 표준 출력되는 Hello 라는 캐릭터 라인의 출력처를 hello.txt 로 변경하고 있습니다. 결과적으로 터미널에서 test.sh를 실행해도 아무 것도 표시되지 않습니다. 또한 cat 명령을 사용하여 hello.txt의 내용을 확인하면 echo 명령이 확실히 출력되었음을 알 수 있습니다.

test.sh

```
echo 'Hello' > hello.txt
```

단말기

```
$ ./test.sh
# 아무것도 출력되지 않음
$ cat hello.txt
Hello
```



**표준 오류 출력 리디렉션 표준 오류 출력**
리디렉션 `2>`은

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">파일 디스크립터 및 출력 리디렉션 기법 정보</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="1671:1-1671:315" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><table data-sourcepos="1673:1-1677:28" style="padding: 0px; margin: 16px 0px; box-sizing: inherit; border-collapse: collapse; border-spacing: 0px; display: inline-block; max-width: 100%; overflow: auto;"><thead style="padding: 0px; margin: 0px; box-sizing: inherit; border-left: 1px solid var(--color-divider);"><tr data-sourcepos="1673:1-1673:55" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><th data-sourcepos="1673:2-1673:9" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; font-weight: bold; background-color: var(--color-surface); border-top: 1px solid var(--color-divider); border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider);"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></th><th data-sourcepos="1673:11-1673:54" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; font-weight: bold; background-color: var(--color-surface); border-top: 1px solid var(--color-divider); border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider);"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></th></tr></thead><tbody style="padding: 0px; margin: 0px; box-sizing: inherit; border-left: 1px solid var(--color-divider);"><tr data-sourcepos="1675:1-1675:20" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1675:2-1675:15" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td><td data-sourcepos="1675:17-1675:19" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"></td></tr><tr data-sourcepos="1676:1-1676:20" style="padding: 0px; margin: 0px; box-sizing: inherit;"><td data-sourcepos="1676:2-1676:15" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td><td data-sourcepos="1676:17-1676:19" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"></td></tr><tr data-sourcepos="1677:1-1677:28" style="padding: 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-surface-variant);"><td data-sourcepos="1677:2-1677:23" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></td><td data-sourcepos="1677:25-1677:27" style="padding: 4px 12px; margin: 0px; box-sizing: inherit; text-align: left; border-bottom: 1px solid var(--color-divider); border-right: 1px solid var(--color-divider); max-width: 600px;"></td></tr></tbody></table><p data-sourcepos="1679:1-1679:369" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><p data-sourcepos="1681:1-1681:116" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><p data-sourcepos="1683:1-1683:305" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p></div></details>



**`>>`에 의한 추가**

- `>`리디렉션 대상 파일이 있으면 원래 파일의 내용을 덮어 씁니다. 덮어쓰기보다는 추가를 하고 싶은 경우는 `>>`를 사용합니다.
- `>`모모`>>` 리디렉트처의 파일이 존재하지 않는 경우는 파일을 신규로 작성해, 거기에 출력합니다.
- `>>`마찬가지로`>` 기호 왼쪽에 파일 설명자 번호를 지정할 수 있습니다.



**`/dev/null`**
`/dev/null`는 특수한 파일로, 읽어도 아무것도 데이터를 돌려주지 않고, 기입해도 결과적으로 어디에도 기록되지 않고 데이터가 사라져 갑니다. 따라서 출력 리디렉션과 함께 불필요한 오류 출력을 버리거나 크기가 0인 파일을 만드는 데 사용됩니다.

```
./myscript.sh 2> /dev/null # 不要なエラー出力の破棄
cat /dev/null > empty.txt  # サイズ0のテキストファイルを作成
```

## (10-2) 표준 출력과 표준 오류 출력을 동시에 리디렉션해 봅시다.

리디렉션은 한 줄로 여러 개 지정할 수 있습니다. 표준 출력과 표준 오류 출력을 별도의 파일로 리디렉션하려면 다음과 같이 지정합니다.

단말기

```
$ ls /bin /error > bin.txt 2> error.txt
```

반대로 표준 출력과 표준 오류 출력을 같은 파일로 리디렉션하려면 다음과 같이 지정하십시오 `&>`. (덮어쓰기의 경우 `&>>`)

단말기

```
$ ls /bin /error &> result.txt
```



<details style="padding: 0px; margin: 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><b style="padding: 0px; margin: 0px; box-sizing: inherit; font-weight: bolder;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;">&amp;&gt;</code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">에 대해 자세히 알아보기</font></font></b></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="1715:1-1715:52" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><div class="code-frame" data-lang="shell-session" data-sourcepos="1716:1-1719:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span></code></pre></div></div><p data-sourcepos="1720:1-1720:594" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><p data-sourcepos="1722:1-1722:116" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><div class="code-frame" data-lang="bash" data-sourcepos="1723:1-1728:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="1729:1-1733:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div><p data-sourcepos="1734:1-1734:101" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p></div></details>

## (10-3) 입력 리디렉션 기능을 사용해 봅시다.



<details style="padding: 0px; margin: 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><b style="padding: 0px; margin: 0px; box-sizing: inherit; font-weight: bolder;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">일반 표준 입력 동작 이미지</font></font></b></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="1744:1-1744:470" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><div class="code-frame" data-lang="shell-session" data-sourcepos="1746:1-1755:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span></code></pre></div></div></div></details>

표준 입력 리디렉션은 `<`에서 가능합니다. `<`는 `0<`약어로 입력 리디렉션 대상으로 `0`파일 디렉터 번호를 지정할 수 있습니다.

test.sh

```
#!/bin/bash

tr hoge fuga < hoge.txt
```

단말기

```
$ cat hoge.txt
hoge hoge
$ ./test.sh
fuga fuga
```

## (10-4) 히어 문서를 사용해 보자.

리디렉션에서는 표준 입력을 파일로 대체했지만 파일이 아닌 쉘 스크립트에 직접 입력 문자열을 쓰고 싶다면 히어 문서를 사용합니다. 히어 문서의 구문은 다음과 같습니다.

```
명령 EOF
히어 문서로 입력되는 내용
EOF
```

후술하는 커멘드 치환과의 병용에 의해, 복수행의 캐릭터 라인을 파일을 개입시키지 않고 변수에 대입하는 것도 가능합니다.

test.sh

```
#!/bin/bash

var1=value
text=$(cat << EOF
    arg1: $1       # 위치 파라미터나 변수 등도 전개된다
    var1: $var1    # 코멘트도 출력되어 버린다
EOF
)
echo "$text"       # "" 로 인용하지 않으면 출력시 개행되지 않습니다.
```

단말기

```
$ ./test.sh test
    arg1: test     # 위치 파라미터나 변수 등도 전개된다
    var1: value    # 코멘트도 출력되어 버린다
```



**`EOF`소개**

- 쓰는 법
  - 2개의 `EOF`부분은 종료 문자열이라고 하며, 이외에도 `EOF`어떤 문자열이라도 좋지만 일반적으로는 , `EOF`, `EOD`등 이 사용됩니다. 다만, 히어 문서의 내용중에서 나오지 않는 캐릭터 라인을 선택할 필요가 있는 점에 주의해 주세요.`EOS``END`
  - 마지막은 `EOF`한 줄에 혼자 써야합니다.
  - 마지막 `EOF`전후에는 공백이나 탭과 같은 공백 문자를 넣을 수 없습니다.
- `<< 'EOF'`
  - 히어 문서 중에서는 후술하는 전개가 행해집니다. 히어 문서 전체로 전개를 하고 싶지 않은 경우는,　`<<`오른쪽에 쓰는 종료 캐릭터 라인을 `''`로 인용합니다.
- `<<-EOF`
  - `<<`대신 `<<-`쓰면 히어 문서의 줄 머리 탭이 무시됩니다. 히어 문서를 알기 쉽게 작성하기 위한 들여쓰기를 무시할 수 있습니다만, 공간에 의한 들여쓰기는 무시되지 않으므로 주의가 필요합니다.



**히어스트링`<<<`**
히어스트링은 히어 문서를 한 줄로 쓰는 방법이며, 종료 문자열은 필요하지 않습니다. `<<<`오른쪽에 쓴 문자열은 히어 문서와 비슷합니다. 배포가 수행됩니다.

test.sh

```
#!/bin/bash

var1=value
text=$(cat <<< "var1: $var1") # <<< 오른쪽은 하나의 문자열이어야합니다.
echo $text
```

단말기

```
$ ./test.sh
var1: value
```

## (10-5) 파이프 라인을 사용해 보자.

명령의 출력은 리디렉션으로 파일로 출력하는 대신 다른 명령의 입력으로 할 수도 있습니다. 이러한 기능을 파이프라인이라고 부르고 `|`라는 기호로 쓸 수 있습니다. 파이프라인은 이전 명령의 표준 출력을 후속 명령의 표준 입력에 전달하며, 후속 명령의 인수로 이전 명령의 출력을 사용할 수 없습니다.

```
$ ls src | grep '.sh' | head -n 10 # src 디렉토리의 .sh 파일을 위에서 10개 표시
```

표준 에러 출력도 맞추어 다음의 커멘드에 건네주는 경우는 `|&`또는 를 `2>&1`사용합니다.

```
$ ls src bin |& grep '.sh' | head -n 10
$ ls src bin 2>&1 | grep '.sh' | head -n 10
```



**프로세스 대체 명령**
의 실행 결과를 다른 명령의 입력으로 사용하는 기능으로 프로세스 대체가 있습니다. 파이프라인은 하나의 명령 결과만 전달할 수 있지만 프로세스 대체를 사용하여 두 개 이상의 인수를 지정하는 것과 같은 명령에 다른 명령의 실행 결과를 전달할 수 있습니다 `diff`.

test.sh

```
#!/bin/bash

diff <(ls dir-a) <(ls dir-b)
```

이것을 모르는 것과 같은 일을 하기 위해서 중간 파일로서 임시 파일을 작성(+삭제)하는 수고가 발생해 버립니다.

test.sh

```
#!/bin/bash

ls dir-a > tmp-a.txt
ls dir-b > tmp-b.txt
diff tmp-a.txt tmp-b.txt
rm tmp-a.txt tmp-b.txt
```

## (10-6) 그룹 명령을 사용해 봅시다.

`{}`에서 여러 명령을 둘러싸면 여러 명령의 출력을 함께 단일 파일로 리디렉션할 수 있습니다. 다음은 모두 동의어입니다.

test.sh

```
#!/bin/bash
# 일반적인 방법
echo first message > output.txt
echo second message >> output.txt
echo third message >> output.txt

# 그룹 명령 사용
{
  echo first message
  echo second message
  echo third message
} > output.txt

# 그룹 커멘드를 1행으로 쓰는 경우는 커멘드끼리를 ; 로 단락짓는다. 마지막 명령에도 필요.
{ echo first message; echo second message; echo third message; } > output.txt
```

`{}`대신에 `()`둘러싸는 것도 마찬가지입니다. 다만, `()`으로 둘러싸았을 때는 내용의 커멘드는 서브 쉘로 실행됩니다. 현재의 쉘로부터 아이 프로세스로서 다른 쉘이 기동되어 그 안에서의 `()`커멘드가 실행됩니다. 이것을 이용하는 것으로, `()`내에서 현재 디렉토리를 변경해도 부모의 프로세스에 영향을 주지 않고 처리를 계속하거나 할 수 있습니다. 또, 서브 쉘 밖에서 정의된 변수는 서브 쉘내에서도 사용할 수 있습니다만, 서브 쉘내에서 그 변수의 값을 변경해도, 서브 쉘 밖에 영향은 주지 않습니다.

test.sh

```
#!/bin/bash

cd /bin
pwd
var1=value1
echo $var1

(
  cd /home/myname
  pwd
  echo $var1
  var1=value2
  echo $var1
)

pwd
echo $var1
```

단말기

```
$ ./test.sh
/bin
value1
/home/myname
value1
value2
/bin
value1
```

# 11. 옵션을 사용하여 디버깅하기 쉽습니다.

## (11-1) `-e`옵션을 사용해 보자.

보통 쉘 스크립트를 실행했을 때는, 도중의 커멘드로 에러가 일어나도 멈추지 않고, 끝까지 처리를 계속해 버립니다. `-e`옵션을 사용하는 것으로, 쉘 스크립트내에서 어떠한 에러가 발생했을 때에, 쉘 스크립트를 종료해 줍니다. 사용법은 간단하고 쉘 스크립트 내에서 `set -e`쓰면 그 위치에서 옵션이 유효하게 됩니다.

test.sh

```
#!/bin/bash
set -e

ls /error         # 여기서 오류가 발생하고 그 시점에서 멈 춥니 다.
mkdir /error/dir1 # 이 처리는 수행되지 않음
```

## (11-2) `-u`옵션을 사용해 보자.

`-u`옵션을 사용하는 것으로 미정의의 변수를 참조하려고 했을 때에 쉘 스크립트를 에러 종료로 해 줍니다. 사용법은 `-e`옵션과 같고, 쉘 스크립트내에서라고 `set -u`쓰면, 그 장소로부터 옵션이 유효하게 됩니다.

test.sh

```
#!/bin/bash
set -u

# 여기에서 work_dir을 정의했다는 오해

rm -rf $work_dir/ # -u 옵션이 없으면 여기서 / 이하를 전부 지워 버리는 곳이었다
```

단말기

```
$ ./test.sh 
./test.sh: line 6: work_dir: unbound variable
```

## (11-3) `-x`옵션을 사용해 보자.

`-x`옵션을 붙이면 실행한 명령을 모두 표준 에러 출력에 출력해 줍니다. 표준 에러 출력이므로, 표준 출력과 리디렉션처를 나누어 두면, 쉘 스크립트의 출력은 터미널에 표시해,에 의한 실행 커멘드의 로그는 파일에 출력할 수도 있습니다 `-x`. 또, `-x`에 의한 출력은 전개 후의 캐릭터 라인으로 행해집니다.

test.sh

```
#!/bin/bash
set -x

var1=value
echo $var1

var1=value2
echo $var1
```

단말기

```
$ ./test.sh 2> log.txt # -x 출력 대상은 표준 오류 출력이므로 리디렉션합니다.
value
value2

$ cat log.txt
+ var1=value
+ echo value
+ var1=value2
+ echo value2
```

## (11-4) `-C`옵션을 사용해 보자.

`>`에서 출력의 리디렉션처에 기존의 파일을 지정하면, 원래의 내용을 덧쓰기해 버립니다만, 옵션을 사용하면 덮어쓰려고 했을 때에 에러로 해 줍니다 `-C`. `-C`옵션을 붙여 있어도에 `>>`의한 추기는 가능합니다. 또, `-C`옵션을 유효하게 하고 있을 때, 그래도 덮어쓰기를 하고 싶은 경우는, 리디렉트의 기호를 으로 하는 것으로 덧쓰기가 가능하게 됩니다 `>|`.

test.sh

```
#!/bin/bash
set -C

touch test1.txt 
echo "aaa" >| test1.txt # 덮어 쓰지만 | 그래서 OK
echo "bbb" >> test1.txt # 추가이므로 OK

touch test2.txt
echo "ccc" > test2.txt  # 덮어쓰기 때문에 여기서 오류
```

단말기

```
$ ./test.sh
./test.sh: line 9: test2.txt: cannot overwrite existing file
$ cat test1.txt
aaa
bbb
```

## (11-5) `-o pipefail`옵션을 사용해 보자.

`-e`옵션으로 커멘드로의 에러 발생시에 쉘 스크립트가 종료한다고 해설했습니다만, 파이프라인의 도중에 에러가 일어났을 때는 캐치해 주지 않습니다. 이것은 파이프라인 전체의 종료 스테이터스가 통상 파이프라인의 말미의 커멘드의 종료 스테이터스가 되고 있기 때문에, 말미의 커멘드로 성공하면 도중의 커멘드로 실패하고 있어도 에러 판정이 되지 않기 때문입니다.

test.sh

```
#!/bin/bash
false | true
echo $?
```

단말기

```
$ ./test.sh
0
```

`-o pipefaile`옵션을 붙이면 파이프라인의 도중에 에러가 일어났을 때에, 파이라푸인 전체의 종료 스테이터스를 에러가 일어난 커멘드의 종료 스테이터스와 동일하게 해 줍니다.

test.sh

```
#!/bin/bash
set -o pipefail

false | true
echo $?
```

단말기

```
$ ./test.sh
1
```

이를 `-e`결합하면 파이프라인 중간에 오류가 발생하면 쉘 스크립트를 종료할 수 있습니다.

test.sh

```
#!/bin/bash
set -e
set -o pipefail

false | true # 여기서 오류가 발생하고 쉘 스크립트가 종료됩니다.
echo $?      # 따라서 이것은 출력되지 않습니다.
```

단말기

```
$ ./test.sh
```

## (11-6) 여러 옵션을 동시에 사용합시다.

여러 옵션을 활성화하는 방법은 다음과 같습니다.

```
# 1개씩 set 해 나간다
set -e
set -u
set -x
set -o pipefail

# 한 줄로 모두 set 한다
set -e -u -x -o pipefail

# 옵션끼리를 연결해 set 한다
set -euxo pipefail
```



**shebang 에서 옵션을 지정하는 방법(비추천)**
여기까지 옵션은 `set`로 활성화하고 있었습니다만, 실은 이하와 같이 shebang 에서도 유효하게 할 수 있습니다.

test.sh

```
#!/bin/bash -u

echo $undefined
defined='defined'
echo $defined
```

단말기

```
$ ./test.sh
./test.sh: line 3: undefined: unbound variable
```

다만, 이 지정 방법의 때에 `bash test.sh`와 같은 기동 방법을 하면 shebang 가 무시되어 옵션이 효과가 없습니다. 옵션은 `set`에서 지정하는 것을 추천합니다.

단말기

```
$ bash test.sh

defined
```



**일시적으로 옵션의 효과를 무효화하는 방법**
옵션의 전의 문자를 `-`없애면(자) `+`, 그 옵션을 무효화할 수가 있습니다.

test.sh

```
#!/bin/bash
set -x
echo 'hoge'
set +x
echo 'fuga'
set -x
echo 'hogefuga'
```

단말기

```
$ ./test.sh
+ echo hoge
hoge
+ set +x
fuga
+ echo hogefuga
hogefuga
```

# 12. 편리한 파라미터 전개를 사용해 보자

## (12-1) 배포란?

쉘은 특수 문자를 다른 문자열로 대체하는 "확장"이라는 기능을 가지고 있습니다. 이 배포를 사용하면 번거로운 문자열 작업을 단순화하거나 명령과 계산 실행 결과를 변수로 유지할 수 있습니다. bash에는 다음과 같은 배포 기능이 있습니다.

- 파라미터 전개
- 경로 이름 확장
- 브레이스 전개
- 칠다 전개
- 명령 대체
- 산술식 전개·평가
- 프로세스 대체

이 장에서는 매개 변수 배포에 대해 설명합니다.

## (12-2) 파라미터 전개란?

[변수의 참조](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#(2-2)-変数の参照) 로 변수명의 앞에 `$`붙여 넣으면(자 `$변수명`), 변수의 값을 참조할 수 있다고 해설했습니다만, 이것도 전개의 일종입니다. `$변수명`의 부분이 변수의 값으로 치환되고 있습니다. 이러한 배포를 매개 **변수 배포** 라고합니다.
`${변수명}`와 같이 `{}`붙여도 파라미터 전개가 작동합니다만, 이 `{}`안에서 `:=`등의 특수한 기호를 이용하는 것으로, 변수의 값을 조작할 수도 있습니다. 이러한 파라미터 전개를 이용하는 것으로, 복잡한 캐릭터 라인 처리를 짧고 간단하게 쓸 수 있고, 조건 분기를 생략하거나 할 수가 있습니다.

## (12-3) `${parameter:-default}`: 기본값으로 바꾸기

참조한 변수에 값이 포함되어 있지 않으면(정의되지 않거나 비어 있는 문자), 뒤의 문자열이 `:-`기본값으로 반환됩니다.

<details style="padding: 0px; margin: 16px 0px; box-sizing: inherit; display: block; color: rgba(0, 0, 0, 0.87); font-family: YakuHanJPs, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Hiragino Sans&quot;, &quot;Hiragino Kaku Gothic ProN&quot;, Meiryo, sans-serif; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">동작 예</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><div class="code-frame" data-lang="bash" data-sourcepos="2093:1-2115:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="2116:1-2133:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span></code></pre></div></div></div></details>



**이런 경우에 편리!**
쉘 스크립트 인수가 지정되지 않은 경우 기본값 지정

<details style="padding: 0px; margin: 16px 0px 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">예</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><div class="code-frame" data-lang="bash" data-sourcepos="2142:1-2147:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="2148:1-2151:3" style="padding: 8px 16px; margin: 32px 0px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div></div></details>

## (12-4) `${parameter-default}`: 정의되지 않은 경우에만 기본값으로 바꾸기

`:`를 빼고만 하면( `-`자), 참조한 변수가 **미정도리인 경우만** , `-`뒤의 캐릭터 라인이 디폴트치로서 돌려주어집니다.

<details style="padding: 0px; margin: 16px 0px; box-sizing: inherit; display: block; color: rgba(0, 0, 0, 0.87); font-family: YakuHanJPs, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Hiragino Sans&quot;, &quot;Hiragino Kaku Gothic ProN&quot;, Meiryo, sans-serif; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">동작 예</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><div class="code-frame" data-lang="bash" data-sourcepos="2159:1-2180:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="2181:1-2197:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span></code></pre></div></div></div></details>

## (12-5) `${parameter:=default}`: 기본값 할당

참조한 변수에 값이 포함되어 있지 않은 경우(미정도 또는 빈 문자) 뒤의 문자열이 기본값으로 `:=`반환되고 변수 **에 기본값이 할당됩니다** .

<details style="padding: 0px; margin: 16px 0px; box-sizing: inherit; display: block; color: rgba(0, 0, 0, 0.87); font-family: YakuHanJPs, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Hiragino Sans&quot;, &quot;Hiragino Kaku Gothic ProN&quot;, Meiryo, sans-serif; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">동작 예</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><div class="code-frame" data-lang="bash" data-sourcepos="2204:1-2225:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="p" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="2226:1-2242:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span></code></pre></div></div></div></details>



**이런 경우에 편리!**

값이 들어 있지 않은 변수에만 초기값을 주고 싶은 경우에 다음과 같은 조건 분기를 발생시키지 않고 끝납니다

```
if [ -z ${parameter} ]; then
  parameter="default"
fi
# => ${parameter:=default} 로 대체 가능
```

## (12-6) `${parameter=default}`: 정의되지 않은 경우에만 기본값으로 바꾸기

`:`를 뽑아서만 `=`하면(자), 참조한 변수가 **미정도리인 경우만** , `=`뒤의 캐릭터 라인이 디폴트치로서 돌려주어져, 게다가, **변수에 디폴트치가 대입됩니다** . (동작 예는 생략)

## (12-7) `${parameter:+default}`: 기본값 사용

`:-`, `:=`있는 경우 `:+`도 있습니다. 다만, `:-`, `:=`과는 반대로, 참조한 변수에 **값이 들어가 있는 (미정도 또는 공문자가 아닌) 경우에** , `:+`뒤의 캐릭터 라인이 디폴트치로서 돌려주어져, 한층 더, **변수에 디폴트치가 대입됩니다** . 정직한 사용법은 잘 모릅니다.

<details style="padding: 0px; margin: 16px 0px; box-sizing: inherit; display: block; color: rgba(0, 0, 0, 0.87); font-family: YakuHanJPs, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Hiragino Sans&quot;, &quot;Hiragino Kaku Gothic ProN&quot;, Meiryo, sans-serif; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">동작 예</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><div class="code-frame" data-lang="bash" data-sourcepos="2265:1-2286:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit;"></font><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="s2" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="k" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(235, 210, 71);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="s1" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="nv" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="2287:1-2303:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="o" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span></code></pre></div></div></div></details>

## (12-8) `${parameter+default}`: 정의시 기본값 사용

참조한 변수가 미정도리가 아닌 경우에, `+`뒤의 캐릭터 라인이 디폴트치로서 돌려주어져, 변수에 디폴트치가 대입됩니다. 이 값은 빈 문자인 경우에도 기본값이 할당됩니다. (동작 예는 생략)

## (12-9) `${parameter:?[message]}`: 값 검사 및 오류

참조한 변수가 미정도리 또는 공문자인 경우, message 를 표시해, 비대화 실행되고 있는 쉘을 에러 종료로 합니다. message는 생략할 수 있으며 생략하면 기본 오류 메시지가 표시됩니다.

test.sh

```
#!/bin/bash

var="value"
echo ${var:?value is undefined}

var=""
echo ${var:?value is undefined} # 빈 문자이므로 여기에서 오류 종료

unset var
echo ${var:?value is undefined}
```

단말기

```
$ ./test.sh
value
./test.sh: line 7: var: value is undefined
```

## (12-10) `${parameter?[message]}`: 값 검사 및 오류

`:`를 뽑아서만 `?`하면, 참조한 변수가 **미정도리인 경우만** 에러 종료로 합니다.

test.sh

```
#!/bin/bash

var2="value2"
echo ${var2?}

var2=""
echo ${var2?} # 빈 문자이므로 여기서 오류가 발생하지 않습니다.

unset var2
echo ${var2?} # 미정도리이므로 여기서 에러 종료한다. message가 지정되지 않은 경우 기본 메시지가 발행됩니다.
```

단말기

```
$ ./test.sh
value2

./test.sh: line 10: var2: parameter null or not set
```

## (12-11) `${#parameter}`: 문자열 길이 얻기

매개 변수 확장만으로 문자열 길이를 얻을 수 있습니다. 일본어도 OK입니다.

test.sh

```
#!/bin/bash

var="hoge"
echo ${var}의 길이는 ${#var}입니다.

var='가다 에이치 사재법'
echo ${var}의 길이는 ${#var}입니다.
```

단말기

```
$ ./test.sh
hoge의 길이는 4
가타다 오이 사법의 길이는 7
```

## (12-12) `${parameter:offset}`, `${parameter:offset:length}`: 일부 추출

`${parameter:offset}`그럼 offset 로 지정한 위치 이후의 캐릭터 라인을 추출합니다. 또한 `:length`붙이는 것으로, offset 그리고 지정한 위치로부터 length 문자분까지를 추출해 줍니다.

test.sh

```
#!/bin/bash

var="가다오이엔 사재법"
echo ${var:4}
echo ${var:0:2}
```

단말기

```
$ ./test.sh
사재법
가다
```

## (12-13) `${parameter#word}`: 이전 합의를 제거합니다(최단 합의).

word 로 지정한 캐릭터 라인에 최단으로 일치하는 특정의 부분까지를 제거해 추출해 줍니다.

test.sh

```
#!/bin/bash

var="kon-den-ei-nen-shi-zai-hou"
echo ${var#kon-} 
echo ${var#kan-} # 앞으로 일치하지 않기 때문에 아무것도 사라지지 않습니다.
echo ${var#*-} # *와일드카드도 사용 가능
echo ${var#*den-}
```

단말기

```
$ ./test.sh
den-ei-nen-shi-zai-hou
kon-den-ei-nen-shi-zai-hou
den-ei-nen-shi-zai-hou
ei-nen-shi-zai-hou
```

## (12-14) `${parameter##word}`: 이전 경기 제거(가장 긴 경기)

`#`를 2개로 하면 최장 일치가 됩니다.

test.sh

```
#!/bin/bash

var="kon-den-ei-nen-shi-zai-hou"
echo ${var##kon-} 
echo ${var##*-} # 최단 일치와 결과가 다름
```

단말기

```
$ ./test.sh
den-ei-nen-shi-zai-hou
hou
```



**이런 경우에 편리!**
확장자에 사용할 수 있습니다.

test.sh

```
#!/bin/bash

file="kon.den/ei.nen/shi-zai-hou.csv"
echo ${file##*.}
```

단말기

```
$ ./test.sh
csv
```

## (12-15) `${parameter%word}`: 뒷동음 제거(최단동음)

`#`를 `%`로 바꾸면 후방 일치가 됩니다.

test.sh

```
#!/bin/bash

var="kon-den-ei-nen-shi-zai-hou"
echo ${var%-hou} 
echo ${var%-hau} # 후방 일치하지 않기 때문에 아무것도 사라지지 않는다.
echo ${var%-*} # *와일드카드도 사용 가능
echo ${var%-zai*} 
```

단말기

```
$ ./test.sh
kon-den-ei-nen-shi-zai
kon-den-ei-nen-shi-zai-hou
kon-den-ei-nen-shi-zai
kon-den-ei-nen-shi
```

## (12-16) `${parameter%%word}`: 마지막 일관성 번호(가장 긴 일관성 번호)를 제거합니다.

`%`를 2개로 하면 최장 일치가 됩니다.

test.sh

```
#!/bin/bash

var="kon-den-ei-nen-shi-zai-hou"
echo ${var%%-hou} 
echo ${var%%-*} # 최단 일치와 결과가 다름
```

단말기

```
$ ./test.sh
kon-den-ei-nen-shi-zai
kon
```

## (12-17) `${parameter/word1/word2}`, `${parameter//word1/word2}`: 문자열 대체

`sed`등을 사용하지 않고 파라미터 전개만으로 캐릭터 라인의 치환도 할 수 있습니다. `${parameter/word1/word2}`는 처음 일치하는 것만 바꾸고 일치하는 `${parameter//word1/word2}`모든 것을 바꿉니다. `#`, `%`로 대체 패턴을 제한 할 수도 있습니다.

test.sh

```
#!/bin/bash

var="hogehoge"
echo ${var/hoge/fuga} # 처음만 바꾸기
echo ${var/geho/fuga} # 일치하는 부분 바꾸기
echo ${var/#hoge/fuga} # 정방향 일치 부분 대체
echo ${var/#geho/fuga} # 정방향 일치하지 않기 때문에 변경되지 않음
echo ${var/%hoge/fuga} # 뒤로 일치하는 부분 바꾸기
echo ${var//hoge/fuga} # 모두 바꾸기
```

단말기

```
$ ./test.sh
fugahoge
hofugage
fugahoge
hogehoge
hogefuga
fugafuga
```

# 13. 브레이스 전개를 사용해 보자

## (13-1) `{str1,str2,str3,・・・}`을 사용한 브레이스 전개

`{}`안에 쉼표로 구분하여 문자열을 정렬하면 각 요소가 앞뒤 문자열과 결합되어 확장됩니다.

```
$ echo hoge-{aaa,bbb,ccc}-fuga
hoge-aaa-fuga hoge-bbb-fuga hoge-ccc-fuga
```

이를 사용하면 여러 파일을 동시에 `touch`만들거나 `cp`같은 디렉토리에 별칭으로 파일을 복사하는 것이 쉬워집니다.

```
$ ls test/
hoge
$ cp test/{hoge,fuga}
$ ls test/
fuga hoge
$ cp test/hoge{,.txt}
$ ls test/
fuga hoge hoge.txt
```

## (13-2) `{start..end}`를 사용한 브레이스 전개

`{}`안에서 start 와 end 의 캐릭터 라인 사이에 닷을 2 개 늘어놓으면(자), start 로부터 end 까지의 연속한 문자나 숫자에 전개됩니다.

```
$ ls
file0
$ touch file{1..5}
$ ls
file0 file1 file2 file3 file4 file5
$ touch file{d..g}
$ ls
file0 file1 file2 file3 file4 file5 filed filee filef fileg
```

이 구문은 for 문의 단어 목록에도 사용할 수 있습니다.

test.sh

```
#!/bin/bash

for i in {1..5}; do
  처리
done
```

# 14. 경로 이름 확장과 물결표 확장을 사용해 봅시다.

## (14-1)을 `*`사용한 `?`경로 이름 확장

경로 이름 확장은 `*`야 `?`등의 기호를 경로 이름과 파일 문자열로 바꿉니다.
`*`모든 문자열과 일치하여 확장됩니다.

단말기

```
$ ls -a # .txt도 표시하기 위해 -a 옵션
.. .txt 0.txt 123.txt hoge.txt fuga.txt
$ ls *.txt # 경로 이름 확장은 숨겨진 파일의 .와 일치하지 않습니다.
0.txt 123.txt hoge.txt fuga.txt
$ ls .* # .과 일치하려면 명시 적으로 .를 작성해야합니다.
. .. .txt
$ ls *.sh # 경로명 확장한 결과 1개도 매치 하지 않는 경우는 그대로의 캐릭터 라인으로 실행된다
ls: *.sh: No such file or directory
```



경로 이름 확장은 디렉토리를 넘어서는 확장을 허용하지 않습니다.

단말기

```
$ ls test/texts/*.txt
0.txt 123.txt hoge.txt fuga.txt
$ ls test/*.txt       
ls: test/*.txt: No such file or directory
```

`?`모든 문자로 확장됩니다.

단말기

```
$ ls -a                               
. .. .txt 0.txt 123.txt hoge.txt fuga.txt
$ ls ?.txt                            
0.txt
$ ls ????.txt                         # ?을 연속적으로 사용할 수 있습니다.
hoge.txt fuga.txt
```

## (14-2) `[ ]`,, `[! ]`를 `[^ ]`사용한 경로 확장

`[ ]`안에 하나 이상의 문자를 쓰면 그 중 하나의 문자와 일치합니다.

```
$ ls
aaa.txt aab.txt aac.txt aad.txt aae.txt aaf.txt
$ ls aa[abcd].txt # ls aaa.txt aab.txt aac.txt aad.txt 로 확장
aaa.txt aab.txt aac.txt aad.txt
```

`[! ]`, `[^ ]`를 사용하면 `[ ]`안에 포함되지 않은 한 문자와 일치합니다.

```
$ ls
aaa.txt aab.txt aac.txt aad.txt aae.txt aaf.txt
$ ls aa[!abcd].txt 
aae.txt aaf.txt
```

패스명 전개의 기호는 복수 조합해 사용할 수도 있습니다.

```
$ ls -a                               
. .. .txt 0.txt 123.txt hoge.txt fuga.txt
$ ls [0-9]*.txt
0.txt 123.txt
```

## (14-3) `~`을 사용한 물결표 전개

물결표 배포는 `~`사용자의 홈 디렉터리로 확장됩니다.

```
$ (cd ~/bin; pwd) # (cd /home/user1/bin; pwd) 으로 확장됩니다. 서브 쉘이므로 디렉토리가 이동하지 않습니다.
/home/user1/bin
```

# 15. 명령 대체를 사용해 봅시다.

## (15-1) `$( )`을 사용한 명령 대체

커멘드 치환에서는 커멘드 실행에 의한 출력을 그대로 캐릭터 라인에 전개합니다. 명령 대체는 `$(명령)`다음과 같이 작성합니다. `$( )`안에 쓴 명령이 실행되어 표준 출력에 출력된 문자열이 전개됩니다.

test.sh

```
#!/bin/bash

touch $(date +%Y-%m-%d).txt
```

단말기

```
$ ls

$ ./test.sh
$ ls
2023-12-01.txt
```

명령 치환 ``명령``도 가능하지만, 이쪽은 중첩하기가 어렵고, 외형상도 알기 어렵기 때문에, 기본적으로는 를 `$(명령)`사용하는 것을 추천합니다.

test.sh

```
#!/bin/bash

var=$(echo $(cat <<< $(pwd)))
echo "${var}"

var2=`echo \`cat <<< \\\`pwd\\\`\``
echo "${var2}"
```

단말기

```
$ ./test.sh
/home/myname/work
/home/myname/work
```

# 16. 쉘 스크립트로 계산을 해보자

## (16-1) `$(( ))`을 `(( ))`사용한 산술식 계산 및 평가

쉘 스크립트에서의 계산에는 `$(( 산술식 ))`, 수치 비교등의 평가에는을 `(( 산술식 ))`사용합시다. 계산만 하고 싶은데를 `(( 산술식 ))`사용하면 예기치 않은 에러가 될 수 있습니다. 또, `let`야등 `expr`의 산술 계산을 위한 커멘드도 있습니다만, 기본적으로 사용하지 않습니다.

test.sh

```
#!/bin/bash

x=$((100+200))
echo 종료 상태: $?
echo x: $x

# (( ))는 평가 결과가 참(0 이외)이면 종료 스테이터스가 성공(0), 거짓(0)이면 실패(1)가 된다
((x > 1000))
echo 종료 상태: $? # 가짜이므로 1
echo x: $x

((x < 1000))
echo 종료 상태: $? # 참이므로 0
echo x: $x

x=0
((x++)) # 증분 전의 값 0으로 평가되고 거짓이므로 종료 상태는 1입니다.
echo 終了ステータス: $?
echo x: $x

x=0
x=$((x + 1))
echo 종료 상태: $? # 계산이 성공하기 때문에 종료 상태는 0
echo x: $x
```

단말기

```
$./test.sh
종료 상태: 0
x: 300
종료 상태: 1
x: 300
종료 상태: 0
x: 300
종료 상태: 1
x: 1
종료 상태: 0
x: 1
```

# 17. 가독성을 높이기 위해 코딩 규약을 지키자

쉘 스크립트는 자유도가 높고 쉽게 쓰기 시작할 수 있지만, 자유도가 높은 만큼 팀 내에서 품질을 맞추기가 어렵습니다. 가독성이 낮은 쓰기 방법이 되어 버리면, 버그의 원인이 되어 버리는 일도 있기 때문에, 일정의 규약을 마련해 읽기 쉬운 쉘 스크립트를 쓰기 위한 구조를 만드는 것이 좋을 것입니다. 세세한 규약은 팀마다 바꿀 필요는 있다고 생각합니다만, 거친 지침을 아래에서 설명합니다.

아래 지침은 기본적으로 Google의 스타일 가이드를 참조합니다.



## (17-1) 파일의 시작 부분에 이것을 쓰자.

### shebang을 쓰자.

특히 `sh`사용하는 것이 아니라면 1행째에 를 `#!/bin/bash`명시해 둡시다.

test.sh

```
#!/bin/bash
```

### 옵션을 쓰자.

옵션은 shebang 로 정의하는 것도 가능합니다만, 스크립트 파일을 직접 지정하는 것 이외의 방법으로 기동되는 경우도 있으므로 2 행째로로 정의해 둡시다 `set`. 우선을 `-euxCo pipefail`지정해 두면 좋다고 생각합니다. 옵션이 더 이상 필요하지 않을 때마다 `+`무효화합시다.

test.sh

```
#!/bin/bash
set -euxCo pipefail

set +x
echo '여기는 디버깅 필요 없음'
set -x
```

### 처리 내용이 작업 디렉토리에 의존하지 않도록 디렉토리를 이동합시다.

쉘 스크립트는 스크립트를 시작한 디렉토리를 현재 디렉토리로 작동합니다. 따라서, 쉘 스크립트 파일로부터의 상대 패스로 다른 파일을 참조하고 있는 경우 등은, 작업 디렉토리로부터 쉘 스크립트 파일을 기동하면(자) 예상대로 동작하지 않는 경우가 있습니다.

<details style="padding: 0px; margin: 16px 0px; box-sizing: inherit; display: block; color: rgba(0, 0, 0, 0.87); font-family: YakuHanJPs, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Hiragino Sans&quot;, &quot;Hiragino Kaku Gothic ProN&quot;, Meiryo, sans-serif; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">NG 예</font></font></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><div class="code-frame" data-lang="bash" data-sourcepos="2696:1-2700:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="c" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(151, 151, 151);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nt" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(255, 128, 149);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span></code></pre></div></div><div class="code-frame" data-lang="shell-session" data-sourcepos="2701:1-2713:3" style="padding: 8px 16px; margin: 24px -16px; box-sizing: inherit; border-radius: 8px; position: relative; background-color: var(--color-gray-110); color: var(--color-gray-0);"><div class="code-lang" style="padding: 2px 8px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-70); border-radius: 0px 0px 4px 4px; color: rgb(255, 255, 255); display: inline-block; font-size: 0.88em; transform: translateY(-8px);"><span class="bold" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></span></div><div class="code-copy" style="padding: 0px; margin: 0px; box-sizing: inherit; display: flex; position: absolute; right: 32px; top: 8px;"></div><div class="highlight" style="padding: 8px 0px; margin: 0px; box-sizing: inherit; background-color: var(--color-gray-110); color: var(--color-gray-0); overflow-x: auto;"><pre style="padding: 0px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em; display: block; line-height: inherit; color: inherit; background-color: rgba(0, 0, 0, 0); border: none; border-radius: 0px;"><code style="padding: inherit; margin: 0px; box-sizing: inherit; font-family: inherit; background-color: inherit; border-radius: 4px; font-size: 0.82em; display: block; min-width: 100%; width: fit-content; color: inherit; line-height: 1.5; text-size-adjust: 100%;"><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="nb" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="gp" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(59, 191, 191);"></span><span class="w" style="padding: 0px; margin: 0px; box-sizing: inherit; color: rgb(227, 227, 227);"></span><span class="go" style="padding: 0px; margin: 0px; box-sizing: inherit;"></span></code></pre></div></div></div></details>

이것을 피하기 위해서, 다음과 같이 쉘 스크립트의 시작 부분에 스크립트가 있는 디렉토리로 이동해 두는 것이 좋습니다.

test.sh

```
#!/bin/bash
set -euxCo pipefail
cd "$(dirname "$0")"
```

단말기

```
$ ls
test.sh hello.txt
$ cat hello.txt
hello
$ ./test.sh
+ cat hello.txt
hello
$ cd ..
$ ./work/test.sh
++ dirname ./work/test.sh
+ cd ./work
+ cat hello.txt
hello
```

다만, 이 방법을 사용하는 경우는, 쉘 스크립트내의 모든 패스를 스크립트의 장소로부터의 상대 패스로 쓰거나, 절대 패스로 써야 합니다. 작업 디렉토리에 의존하는 쉘 스크립트를 작성하지 마십시오.

### `usage`함수에서 처리 내용과 사용법을 스크립트에 설명합시다.

무엇을 하는 스크립트인지, 어떤 인수를 지정하면 되는지 등을 함수에 정리해 둡시다 `usage`.

test.sh

```
#!/bin/bash
set -euxCo pipefail
cd "$(dirname "$0")"

function usage() {
cat <<EOF >&2 # 히어 문서를 사용할 때 리디렉션을 여기에 씁니다.
Description:
  Description of this script.
  
Usage:
  $0 [OPTIONS] <FILE>

Options:
  --version, -v   print "$(basename "$0")" version
  --help, -h      print this
EOF 
exit 1
}
```

### `getopts`명령으로 옵션 분석을 수행합시다.

`getopts`라는 내장 명령과 `while`문장 `case`을 결합하면 옵션을 쉽게 분석 할 수 있습니다. 앞의 `usage`함수에 맞게 옵션 분석을 구현해 보겠습니다.



<details style="padding: 0px; margin: 0px; box-sizing: inherit; display: block;"><summary style="padding: 0px; margin: 0px; box-sizing: inherit; display: list-item; cursor: pointer;"><b style="padding: 0px; margin: 0px; box-sizing: inherit; font-weight: bolder;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;">getopts</code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;">명령 사용법</font></font></b></summary><div style="padding: 0px; margin: 0px; box-sizing: inherit;"><p data-sourcepos="2770:1-2770:295" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><p data-sourcepos="2772:1-2772:91" style="padding: 0px; margin: 16px 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></p><ul data-sourcepos="2773:1-2775:450" style="padding: 0px 0px 0px 1.5em; margin: 16px 0px; box-sizing: inherit; list-style: disc;"><li data-sourcepos="2773:1-2773:229" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li><li data-sourcepos="2774:1-2774:328" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li><li data-sourcepos="2775:1-2775:450" style="padding: 0px; margin: 0px; box-sizing: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font><code style="padding: 1px 4px; margin: 0px; box-sizing: inherit; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.08); border-radius: 4px; font-size: 0.88em;"></code><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font><font style="padding: 0px; margin: 0px; box-sizing: inherit; vertical-align: inherit;"></font></font></li></ul></div></details>

test.sh

```
#!/bin/bash
set -euxCo pipefail
cd "$(dirname "$0")"

function usage() {
(생략)
}

while getopts :a:bc:hH OPT; do
    case $OPT in
        a)
            echo '[-a]가 지정되었습니다(인수: ${OPTARG})'
            ;;
        b)
            echo '[-b]가 지정되었습니다'
            ;;
        c)
            echo '[-c]가 지정되었습니다(인수: ${OPTARG})'
            ;;
        h|H)
            usage
            ;;
        *)
            echo '잘못된 옵션이 지정되었습니다: ${OPT}'
            ;;
    esac
done
```

[(5-3)](https://qiita.com/osw_nuco/items/(5-3)-`$#`) 에서 소개한 `$#`, `shift`, 위치 파라미터를 조합하는 것으로도 옵션 해석은 할 수 있습니다만, `getopts`커멘드를 사용하는 편이 간단하게 해석할 수 있다고 생각합니다. 다만, 롱 옵션을 사용하는 경우는 `$#`, `shift`위치 파라미터를 조합한 옵션 해석을 실시하는 것이 좋을 것입니다.



`getopts`을 사용하면 쉘 스크립트로 옵션 해석을 구현하는 것이 조금은 간단해진다고는 해도, 풍부한 옵션을 받아들이는 것은 많은 경우 노력이 걸립니다. 옵션 해석을 구현하는 대신에, 환경 변수로 옵션치를 건네주었지만 쪽이 단순하고 가독성도 높아지는 경우가 있습니다.

test.sh

```
#!/bin/bash
set -euxCo pipefail
cd "$(dirname "$0")"

option_a=${OPTION_A}
option_b=${OPTION_B}
```

단말기

```
$ OPTION_A="hoge" ./test.sh
```

## (17-2) 공백과 개행을 사용하여 쉽게 볼 수 있습니다.

### 들여쓰기는 반각 공간 2개로 하자

쉘 스크립트에서는 명령끼리를 파이프로 연결하거나 하는 관계로 1행이 길어지는 경향이 있습니다. 가급적 한 줄에 들어가기 위해 들여쓰기는 반각 공간 2개로 해 두면 좋을 것입니다.

### 파이프 전후에는 반각 공간을 하나씩 넣자

파이프 ( `|`)의 전후에는 반각 스페이스가 있는 것이 보기 쉽습니다.

```
command1 | command2 # 보기 쉬운
command1| command2 # 보기 힘들다
command1 |command2 # 보기 힘들다
command1|commnad2 # 보기 힘들다
```

### 리디렉션 앞에는 반각 공간을 하나 넣고 뒤에는 공간을 넣지 않도록합시다.

`>`앞의 숫자 사이에 반각 공백을 넣는 것은 원래 문법적인 실수입니다. `>`보기 쉬운 공간을 넣으십시오.

```
$ echo aaa 1> sample.txt  # 보기 쉬운
$ cat sample.txt
aaa
$ echo aaa 1 > sample.txt # 문법적인 실수
$ cat sample.txt 
aaa 1
$ echo aaa 1>sample.txt   # 보기 힘들다
$ cat sample.txt
aaa

```

### 한 줄로 표시 할 수없는 경우에는 `\`줄 바꿈

1행이 길어져 왔을 경우는, 적절히 `\`개행합시다.

test.sh

```
#!/bin/bash

echo '이 줄은 아주 아주 아주 아주 아주 아주 아주 아주 아주 아주 아주 아주'\
'긴'
```

단말기

```
$ ./test.sh
이 줄은 아주 아주 아주 아주 아주 아주 아주 아주 아주 아주 아주 긴
```

## (17-3) 변수, 전개의 작성 방법을 지키자

### 여러 단어의 경우 `_`에 결합합시다.

문법적인 결정은 아니지만, 변수명은 소위 스네이크 케이스라고 하는 형식으로 써 봅시다.

```
sample_variable="sample variable"
```

### 변수 선언의 오른쪽이 문자열 인 경우로 `""`둘러싸자.

이후의 변경으로 예기치 않은 에러를 낳지 않기 위해서도 먼저 문자열은으로 `""`둘러싸 둡시다.

```
sample_variable="sample variable" # OK
sample_variable=sample variable   # NG
```

### 상수는 대문자, 상수 이외에는 소문자로 쓰자.

상수는 상수라는 것을 알기 쉽게 대문자로 씁시다. 스네이크 케이스는 일반 변수 이름과 동일합니다.

```
CONST_VARIABLE="const variable"
```

### 상수는 `readonly`에서 선언하자.

상수는 예기치 않게 값이 변경되지 않도록 `readonly`함께 선언하고, 읽기 전용으로 해 둡시다.

```
readonly CONST_VARIABLE="const variable"
```

### 파일명, 디렉토리명을 격납하는 변수는 정수로 하자

파일명, 디렉토리명은 한번 정의해 버리면 스크립트내에서 바꾸는 것은 드물지 않을 것이므로, 정수로 해 둡시다. 상수로 하는 것은 (위의 규약적으로 말하면) 변수명을 대문자의 뱀 케이스로 해, 함께 선언한다고 하는 것입니다 `readonly`.

```
readonly FILE_NAME="/home/myname/work/sample.txt"
```

### 파라미터 전개를 할 때는 `${}`으로 둘러싸자

미리 정의된 변수를 매개변수 확장에서 참조하는 경우가 `$변수명`아니라 `${변수명}`를 사용하도록 합시다. `${변수명}`쪽이 파라미터 전개를 사용하고 있는 것을 알기 쉽고, 또한 변수명과 캐릭터 라인이 연결하는 것에 의한 갑작스런 에러를 막을 수 있습니다.

```
var="hoge"
echo "var의 값은 ${var}입니다." 
echo "${var}fuga"
```

다만 , `$0`, `$1`, `$@`, `$?`등의 특수 파라미터는 그대로라도 알기 쉬우므로 {} 를 붙이지 않아도 좋을 것입니다.

### 정의되지 않거나 빈 문자가 될 수 있는 경우 기본값으로 채우거나 오류 메시지 표시

옵션을 환경 변수로 지정하려고 하는 경우나, 커멘드 치환을 사용해 변수에 커멘드의 결과를 격납하려고 하고 있는 경우는, 변수의 값이 공문자가 되는 경우가 있습니다. 이러한 경우에 대비하여 매개 변수를 확장할 때 기본값을 채우거나 오류 메시지를 지정합니다.

```
cat_result="$(cat ./sample.txt)"
echo ${cat_result:-default text}

open_api_key=${OPEN_API_KEY:?Specify OPEN_API_KEY} 
```

### 명령 대체는 `$()`로 둘러싸자.

커멘드 치환은 `$( )`가로 `` ``로 가능합니다만, `$( )`쪽이 가독성이 높고, 중첩도 하기 쉽기 때문에 쪽을 `$( )`사용합시다.

```
cat_result="$(cat ./sample.txt)"
cat_result=`cat ./sample.txt`
```

### 파라미터 전개하고 있는 개소는에 `""`둘러싸자

파라미터 전개의 결과가 공백이나 개행을 포함하고 있는 경우에 대비해 로 `""`둘러싸 두는 것이 안전합니다.

test.sh

```
#!/bin/bash

cat_result=$(cat sample.txt)
echo ${cat_result}   # "" 로 둘러싸지 않으면 결과를 그대로 취급할 수 없는 경우가 있다
echo "${cat_result}"
```

단말기

```
$ cat sample.txt
hoge
fuga
$ ./test.sh
hoge fuga
hoge
fuga
```

## (17-4) 함수를 작성하는 방법을 지키자.

### `function`쓰자.

함수 정의 시에 야를 `function`생략 `()`하는 기법도 있습니다만, 가독성을 위해서는 어느쪽이나 붙여 두는 것이 좋을 것입니다.

```
function some_func() {
  echo "do something"
  return 0
}
```

### 지역 변수의 시작 부분에 `_`붙이자.

함수 내에서만 사용하는 변수는 적극적으로 로컬 변수로 하고, 로컬 변수로 하는 경우는 참조시에 로컬 변수라고 알기 쉽도록 변수명의 선두를 붙입니다 `_`.

```
function some_func() {
  local _print_str="do something"
  echo "${_print_str}"
  return 0
}
```

### 함수 이름은 `_`으로 구분합시다.

변수 이름과 마찬가지로 소문자 뱀 케이스로 작성합시다.

```
function some_func() {
  echo "do something"
  return 0
}
```

### 꼭 `return`하자

종료 스테이터스는 정상 종료시는 0, 이상 종료시는 0 이외가 되도록 합시다.

```
function some_func() {
  if [[ "$1" == "test" ]]; then
    echo "success"
    return 0
  else
    echo "fail" >&2
    return 1
  fi
}
```

## (17-5) 제어문을 깔끔하게 쓰자.

### if와 then은 같은 줄에 쓰고;

if 문은 다음과 같이 씁시다.

```
if 조건; then
	처리
fi
```

; 를 사용하지 않고 then 앞에서 개행하는 쓰는 방법도 있지만 위와 같이 쓰는 것이 많다고 생각합니다. 어느 쪽으로 써도 상관없습니다만, 적어도 팀내에서는 쓰는 법을 통일합시다.

```
if 조건
then
	처리
fi
```

### if 문을 생략하지 않고 쓰자.

다음과 같이 if 문을 사용하지 않아도 조건 분기를 쓸 수 있지만 이해하기 어렵기 때문에 if 문을 쓰도록합시다.

```
[[ "$var" -eq 0 ]] && echo "true" || echo "false"
```

### if 또는 while 문 조건은 `[ ]`대신 `[[ ]]`사용합시다.

`[[ ]]`그럼 단어 분할되지 않기 때문에 안전하게 변수 취급할 수 있어 패턴 매치 등 기능도 풍부하기 때문에, 대신를 `[ ]`사용 `[[ ]]`하도록 합시다.

```
if [[ $var === "test" ]]; then
  echo "This is sample."
fi
```

### for, while 과 do 는 같은 행에 쓰고, 뒤에는 반각 공간을 하나 붙이자

if 문은 다음과 같이 씁시다.

```
for 변수 in 단어 목록; do
	처리
done

while 조건; do
	처리
done
```

; 를 사용하지 않고 do 의 앞에서 개행하는 쓰는 방법도 있습니다만, if 와 맞추어 이쪽을 추천하고 있습니다. 어느 쪽으로 써도 상관없습니다만, 적어도 팀내에서는 쓰는 법을 통일합시다.

```
for 변수 in 단어목록
do
	처리
done

while 조건
do
	처리
done
```

## (17-6) 린터, 포매터를 사용합시다.

VSCode 에는 쉘 스크립트용의 린터, 포매터의 확장 기능이 존재하므로 사용해 두면 좋을 것입니다.

`ShellCheck`(린터)



`shell-format`(포매터)



# 18. 마지막으로 편리한 쉘 스크립트로 편리한 명령을 소개!

## (18-1) `source`명령으로 다른 쉘 스크립트에서 함수와 변수를 읽으십시오.

[(1-4)](https://qiita.com/osw_nuco/items/(1-4)-シェルスクリプトを実行してみよう) 에서 소개한 것처럼 쉘 스크립트의 실행 방법에는 다음의 3가지가 있습니다.

1. 실행 권한을 부여한 파일 이름을 지정하여 실행
2. `bash`또는 `sh`명령의 인수로 지정하여 실행
3. `source`또는 `.`명령의 인수로 지정하여 실행

이 중 1. 과 2. 의 방법은 쉘 스크립트의 실행을 명령한 현재의 프로세스 (current 쉘)로부터 새롭게 자식 프로세스가 만들어져 그 자식 프로세스상에서 쉘 스크립트가 실행됩니다. 쉘 스크립트가 종료하면(자), 자식 프로세스 자체도 종료해, 호출측의 커런트 쉘에 자식 프로세스의 상태는 인계되지 않습니다.

반대로 3. `source`또는 `.`명령을 사용하면 쉘 스크립트가 현재 쉘에서 실행됩니다. 따라서 쉘 스크립트 실행 후의 상태(변수나 함수의 정의 등)가 현재 쉘에서도 인계됩니다.

터미널에서 `source`또는 명령으로 쉘 스크립트를 실행하는 것은 거의 없지만 `.`, 쉘 스크립트 내에서 다른 쉘 스크립트에 작성된 설정이나 함수를 사용하고 싶거나 명령으로 쉘 스크립트를 실행하십시오 .`source``.`

another.sh

```
#!/bin/bash
function another_func() {
  echo "another func"
}
```

test.sh

```
#!/bin/bash
set -euCo pipefail
cd "$(dirname "$0")"

source ./another.sh

another_func
```

단말기

```
$ ./test.sh
another func
```

## (18-2) `trap`커멘드로 쉘 스크립트가 종료·중단했을 때의 동작을 구현하자

`trap`명령을 사용하여 쉘 스크립트가 종료되거나 중단된 경우에 반드시 움직이는 처리를 정의해 둘 수 있습니다. 이것을 사용하는 것으로, 중단시에 작성 도중의 파일을 삭제하거나 종료시에 종료시에 퇴피하고 있던 파일을 되돌릴 수가 있습니다.

`trap`명령은 첫 번째 인수에 수행할 처리를 문자열로 전달합니다. 또한 두 번째 인수 이후에 어떤 신호에 대해 처리를 수행할지 선택합니다. 시그널에는 시그널명과 시그널 번호가 할당되어 있어 어느 쪽으로 지정해도 상관없습니다. 예를 들어, `Ctrl-C`를 눌러 프로그램을 중단할 때는 `(SIG)INT`신호가 전송됩니다. 이에 `(SIG)INT`대한 신호 번호는 `2`입니다. 또한, 시그널 번호는 `0`쉘 스크립트 종료시에, 프로세스가 자신에 대해서 창출하는 EXIT 시그널을 나타냅니다.

test.sh

```
#!/bin/bash

data=
SAVE_TMP_FILE="~/tmpdata.txt"

function save_tmp_data() {
  echo "$data" > "$SAVE_TMP_FILE"
  echo "save data to $SAVE_TMP_FILE"
}

trap "
  echo 'receive INT!'
  save_tmp_data         # 함수도 실행 가능
  exit 1                # exit하지 않으면 INT를 받더라도 처리가 계속됩니다.
" INT                   # INT는 2입니다.

for i in {1..100}; do
  echo "$i"
  data=$((data + i))
done

echo $data
```

단말기

```
$ ./test.sh
1
2
3
^Creceive INT!
save data to ~/tmpdata.txt
$ cat ~/tmpdata.txt
6
```

## (18-3) `mktemp`명령으로 일시적으로 필요한 파일 / 디렉토리를 만들자.

`mktemp`명령을 사용하면 적절한 이름의 파일이 생성됩니다. `-d`옵션을 붙이면 파일이 아닌 디렉토리가 작성됩니다. 이것과 위에서 소개한 `trap`커멘드를 조합하는 것으로, 쉘 스크립트의 처리중에만 존재하는 파일, 디렉토리를 사용할 수 있습니다.

test.sh

```
#!/bin/bash

temp_file="$(mktemp)"
temp_dir="$(mktemp -d)"

trap "
  echo delete $temp_file
  rm -f $temp_file
  
  echo delete $temp_dir
  rm -rf $temp_dir
" 0 # 실행 종료시에 반드시 실행되는 int를 받았을 경우에서도

echo "aaaa" > $temp_file

data="$(cat $temp_file)"
echo $data
```

단말기

```
$ ./test.sh
aaaa
delete /var/folders/c0/b120wc4j3fn8nc055bjzcyt40000gn/T/tmp.QhkRN9Bg
delete /var/folders/c0/b120wc4j3fn8nc055bjzcyt40000gn/T/tmp.AjB0It3r
```

# 참고

본 기사의 집필에 있어서, 이하의 서적을 참고로 했습니다. 매우 알기 쉬운 서적이므로 쉘 스크립트에 관심이 있으면 꼭 읽어 보는 것을 추천합니다!



# 마지막으로



저희 Nuco는 다른 여러 가지 유용한 기사를 공개합니다. 원한다면 Organization 페이지를 들여다보십시오.
또, Nuco에서는 함께 일하는 동료도 모집하고 있습니다! 흥미를 가질 수 있는 분은, [이쪽](https://www.recruit.nuco.co.jp/?qiita_item_id=383c69b1b4c92fbbfaf7) 까지.



1. 블록 특수 파일이나 캐릭터 특수 파일에 대해서는 이하등을 참조해 주세요.
   [https://qiita.com/angel_p_57/items/1faafa275525469788b4 ](https://qiita.com/angel_p_57/items/1faafa275525469788b4)[↩ ](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#fnref-special_file)[↩ 2](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#fnref-special_file-2)
2. SGID, SUID에 대해서는 다음 등을 참조하십시오.
   [https://eng-entrance.com/linux-permission-sgid ](https://eng-entrance.com/linux-permission-sgid)[↩ ](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#fnref-sgid)[↩ 2](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#fnref-sgid-2)
3. 심볼릭 링크에 대해서는 아래 등을 참조하십시오.
   [https://wa3.i-3-i.info/word1151.html ](https://wa3.i-3-i.info/word1151.html)[↩ ](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#fnref-symbolic_link)[↩ 2](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#fnref-symbolic_link-2)
4. 스티키 비트에 대해서는 아래 등을 참조하십시오.
   [https://eng-entrance.com/linux-permission-stickybit ](https://eng-entrance.com/linux-permission-stickybit)[↩](https://qiita.com/osw_nuco/items/a5d7173c1e443030875f?utm_source=Qiitaニュース&utm_campaign=39fa3199c8-Qiita_newsletter_597_12_20&utm_medium=email&utm_term=0_e44feaa081-39fa3199c8-34467781#fnref-sticky_bit)